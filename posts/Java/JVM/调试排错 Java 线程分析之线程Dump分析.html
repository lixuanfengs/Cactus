<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.58" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://cactusli.net/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20Java%20%E7%BA%BF%E7%A8%8B%E5%88%86%E6%9E%90%E4%B9%8B%E7%BA%BF%E7%A8%8BDump%E5%88%86%E6%9E%90.html"><meta property="og:site_name" content="Cactus's Blog"><meta property="og:title" content="è°ƒè¯•æ’é”™ Java çº¿ç¨‹åˆ†æä¹‹çº¿ç¨‹Dumpåˆ†æ"><meta property="og:description" content="Thread Dumpæ˜¯éå¸¸æœ‰ç”¨çš„è¯Šæ–­Javaåº”ç”¨é—®é¢˜çš„å·¥å…·ã€‚ è°ƒè¯•æ’é”™ Java çº¿ç¨‹åˆ†æä¹‹çº¿ç¨‹Dumpåˆ†æ Thread Dumpä»‹ç» ä»€ä¹ˆæ˜¯Thread Dump Thread Dumpç‰¹ç‚¹ Thread DumpæŠ“å– Thread Dumpåˆ†æ Thread Dumpä¿¡æ¯ ThreadçŠ¶æ€åˆ†æ å…³é”®çŠ¶æ€åˆ†æ å…³é”®çŠ¶æ€ç¤ºä¾‹ æ¡ˆä¾‹åˆ†æ é—®é¢˜åœºæ™¯ æ­»..."><meta property="og:type" content="article"><meta property="og:image" content="https://lixuanfengs.github.io/blog-images/vp/Java/java-jvm-debug-1.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-03-22T10:01:39.000Z"><meta property="article:tag" content="Java"><meta property="article:tag" content="JVM"><meta property="article:published_time" content="2024-03-17T17:08:41.000Z"><meta property="article:modified_time" content="2024-03-22T10:01:39.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"è°ƒè¯•æ’é”™ Java çº¿ç¨‹åˆ†æä¹‹çº¿ç¨‹Dumpåˆ†æ","image":["https://lixuanfengs.github.io/blog-images/vp/Java/java-jvm-debug-1.png"],"datePublished":"2024-03-17T17:08:41.000Z","dateModified":"2024-03-22T10:01:39.000Z","author":[{"@type":"Person","name":"Cactus li","url":"https://cactusli.net"}]}</script><meta name="referrer" content="no-referrer-when-downgrade"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><link rel="alternate" type="application/rss+xml" href="https://cactusli.net/rss.xml" title="Cactus's Blog RSS Feed"><title>è°ƒè¯•æ’é”™ Java çº¿ç¨‹åˆ†æä¹‹çº¿ç¨‹Dumpåˆ†æ | Cactus's Blog</title><meta name="description" content="Thread Dumpæ˜¯éå¸¸æœ‰ç”¨çš„è¯Šæ–­Javaåº”ç”¨é—®é¢˜çš„å·¥å…·ã€‚ è°ƒè¯•æ’é”™ Java çº¿ç¨‹åˆ†æä¹‹çº¿ç¨‹Dumpåˆ†æ Thread Dumpä»‹ç» ä»€ä¹ˆæ˜¯Thread Dump Thread Dumpç‰¹ç‚¹ Thread DumpæŠ“å– Thread Dumpåˆ†æ Thread Dumpä¿¡æ¯ ThreadçŠ¶æ€åˆ†æ å…³é”®çŠ¶æ€åˆ†æ å…³é”®çŠ¶æ€ç¤ºä¾‹ æ¡ˆä¾‹åˆ†æ é—®é¢˜åœºæ™¯ æ­»...">
    <link rel="preload" href="/assets/style-DFJaYI29.css" as="style"><link rel="stylesheet" href="/assets/style-DFJaYI29.css">
    <link rel="modulepreload" href="/assets/app-CF9kF85C.js"><link rel="modulepreload" href="/assets/è°ƒè¯•æ’é”™ Java çº¿ç¨‹åˆ†æä¹‹çº¿ç¨‹Dumpåˆ†æ.html-BXc6AS9N.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">Cactus&#39;s Blog</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="ä¸»é¡µ"><!--[--><span class="font-icon icon iconfont icon-zhuye" style=""></span><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/demo/" aria-label="å¯¼èˆª"><!--[--><span class="font-icon icon iconfont icon-daohang" style=""></span><!--]-->å¯¼èˆª<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="çŸ¥è¯†ä½“ç³»"><!--[--><span class="font-icon icon iconfont icon-biji" style=""></span>çŸ¥è¯†ä½“ç³»<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">åç«¯</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/posts/Java/" aria-label="Java"><!--[--><span class="font-icon icon iconfont icon-java" style=""></span><!--]-->Java<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/Spring/" aria-label="Spring"><!--[--><span class="font-icon icon iconfont icon-spring" style=""></span><!--]-->Spring<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/Python/" aria-label="Python"><!--[--><span class="font-icon icon iconfont icon-python" style=""></span><!--]-->Python<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">å‰ç«¯</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/webs/ES6/" aria-label="ES6"><!--[--><span class="font-icon icon iconfont icon-code" style=""></span><!--]-->ES6<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/webs/TypeScript/" aria-label="TypeScript"><!--[--><span class="font-icon icon iconfont icon-code" style=""></span><!--]-->TypeScript<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">æœåŠ¡å™¨</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/linuxs/Linux/" aria-label="Linux"><!--[--><span class="font-icon icon iconfont icon-linux" style=""></span><!--]-->Linux<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/linuxs/Docker/" aria-label="Docker"><!--[--><span class="font-icon icon iconfont icon-docker" style=""></span><!--]-->Docker<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">åšå®¢ç›¸å…³</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/blog/" aria-label="åšå®¢ç›¸å…³"><!--[--><span class="font-icon icon iconfont icon-blog" style=""></span><!--]-->åšå®¢ç›¸å…³<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/tutorial/" aria-label="å·¥å…·|æ•™ç¨‹"><!--[--><span class="font-icon icon iconfont icon-ruanjian" style=""></span><!--]-->å·¥å…·|æ•™ç¨‹<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/collect.html" aria-label="æ”¶è—"><!--[--><span class="font-icon icon iconfont icon-shoucang1" style=""></span><!--]-->æ”¶è—<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/visitorsbook.html" aria-label="ç•™è¨€æ¿"><!--[--><span class="font-icon icon iconfont icon-liuyanpinglun" style=""></span><!--]-->ç•™è¨€æ¿<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/friend.html" aria-label="å‹é“¾"><!--[--><span class="font-icon icon iconfont icon-duankailianjie" style=""></span><!--]-->å‹é“¾<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å…³äº"><!--[--><span class="font-icon icon iconfont icon-guanyu" style=""></span>å…³äº<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/intro.html" aria-label="å…³äºæˆ‘"><!--[--><span class="font-icon icon iconfont icon-people" style=""></span><!--]-->å…³äºæˆ‘<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/about.html" aria-label="å…³äºæœ¬ç«™"><!--[--><span class="font-icon icon iconfont icon-info" style=""></span><!--]-->å…³äºæœ¬ç«™<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/lixuanfengs/Cactus" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://fire.199228.xyz/" title="å¼€å¾€" target="_blank" rel="noopener noreferrer" aria-label="travelling"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor" style="width:1.25rem;height:1.25rem;vertical-align:middle"><path d="M658.836 519.32c-22.121 0-40.145 18.431-40.145 40.957 0 22.528 18.023 40.962 40.145 40.962 22.117 0 40.141-18.434 40.141-40.962 0-22.526-18.024-40.957-40.141-40.957zM364.742 519.32c-22.121 0-40.141 18.431-40.141 40.957 0.41 22.528 18.02 40.962 40.141 40.962 22.117 0 40.141-18.434 40.141-40.962 0-22.526-18.024-40.957-40.141-40.957z" p-id="8700"></path><path d="M512 0C229.23 0 0 229.23 0 512s229.23 512 512 512 512-229.23 512-512S794.77 0 512 0z m133.727 804.81c0 7.375-6.145 13.52-13.516 13.52H391.773c-7.371 0-13.515-6.145-13.515-13.52v-13.516c0-7.371 6.144-13.517 13.515-13.517h240.438c7.371 0 13.516 6.146 13.516 13.517v13.516z m120.832 37.273c-12.289 6.965-27.441 2.867-34.406-9.418l-54.887-96.668c-4.504 0.82-9.422 1.23-13.926 1.23H361.054c-4.914 0-9.421-0.41-13.925-1.23l-54.887 96.668c-6.965 12.285-22.527 16.383-34.406 9.418-12.289-6.961-16.383-22.938-9.422-35.223l51.199-90.113c-27.031-19.66-43.418-52.43-40.957-88.883l19.25-293.273c3.277-49.152 34.406-88.066 87.246-88.066h80.281c0-37.684 29.899-67.993 66.762-67.993 36.868 0 66.766 30.309 66.766 67.993h93.391c53.246 0 70.449 38.914 73.727 88.066l19.25 293.273c2.461 36.453-13.926 69.223-40.957 88.883l51.199 90.113c6.964 12.696 2.867 28.262-9.012 35.223z" p-id="8701"></path><path d="M672.352 314.931H351.633c-14.747 0-26.622 12.285-26.622 27.441v108.953c0 15.157 11.875 27.446 26.622 27.446h320.719c14.746 0 26.625-12.289 26.625-27.446V342.372c0-15.156-11.879-27.441-26.625-27.441z" p-id="8702"></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/" aria-label="Java çŸ¥è¯†ä½“ç³»"><!--[--><span class="font-icon icon iconfont icon-java" style=""></span><!--]-->Java çŸ¥è¯†ä½“ç³»<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="vp-sidebar-title">Java åŸºç¡€</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-list" style=""></span><span class="vp-sidebar-title">Java é›†åˆæ¡†æ¶</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-proxy" style=""></span><span class="vp-sidebar-title">Java å¤šçº¿ç¨‹å’Œå¹¶å‘</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-IO" style=""></span><span class="vp-sidebar-title">Java IO/NIO/AIO</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="vp-sidebar-title">Java8 æ–°ç‰¹æ€§</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="vp-sidebar-title">JVM æ ¸å¿ƒçŸ¥è¯†ç‚¹</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/JVM%20%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB%E8%AF%A6%E8%A7%A3.html" aria-label="JVM ç›¸å…³çŸ¥è¯†ä½“ç³»è¯¦è§£"><!---->JVM ç›¸å…³çŸ¥è¯†ä½“ç³»è¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/JVM%20%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81%E8%AF%A6%E8%A7%A3.html" aria-label="JVM åŸºç¡€ä¹‹ç±»å­—èŠ‚ç è¯¦è§£"><!---->JVM åŸºç¡€ä¹‹ç±»å­—èŠ‚ç è¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/JVM%20%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%AD%97%E8%8A%82%E7%A0%81%E7%9A%84%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF.html" aria-label="JVM åŸºç¡€ä¹‹å­—èŠ‚ç çš„å¢å¼ºæŠ€æœ¯"><!---->JVM åŸºç¡€ä¹‹å­—èŠ‚ç çš„å¢å¼ºæŠ€æœ¯<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/JVM%20%E5%9F%BA%E7%A1%80%E4%B9%8BJava%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6.html" aria-label="JVM åŸºç¡€ä¹‹Java ç±»åŠ è½½æœºåˆ¶"><!---->JVM åŸºç¡€ä¹‹Java ç±»åŠ è½½æœºåˆ¶<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/JVM%20%E5%9F%BA%E7%A1%80%E4%B9%8BJVM%20%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84.html" aria-label="JVM åŸºç¡€ä¹‹JVM å†…å­˜ç»“æ„"><!---->JVM åŸºç¡€ä¹‹JVM å†…å­˜ç»“æ„<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/JVM%20%E5%9F%BA%E7%A1%80%E4%B9%8B%20Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%BC%95%E5%85%A5.html" aria-label="JVM åŸºç¡€ä¹‹ Java å†…å­˜æ¨¡å‹å¼•å…¥"><!---->JVM åŸºç¡€ä¹‹ Java å†…å­˜æ¨¡å‹å¼•å…¥<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/JVM%20%E5%9F%BA%E7%A1%80%E4%B9%8B%20Java%20%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E8%AF%A6%E8%A7%A3.html" aria-label="JVM åŸºç¡€ä¹‹ Java å†…å­˜æ¨¡å‹è¯¦è§£"><!---->JVM åŸºç¡€ä¹‹ Java å†…å­˜æ¨¡å‹è¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/GC%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" aria-label="GC åƒåœ¾å›æ”¶åŸºç¡€çŸ¥è¯†"><!---->GC åƒåœ¾å›æ”¶åŸºç¡€çŸ¥è¯†<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/GC%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E4%B9%8BG1%E8%AF%A6%E8%A7%A3.html" aria-label="GC åƒåœ¾å›æ”¶å™¨ä¹‹G1è¯¦è§£"><!---->GC åƒåœ¾å›æ”¶å™¨ä¹‹G1è¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/GC%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E4%B9%8BZGC%E8%AF%A6%E8%A7%A3.html" aria-label="GC åƒåœ¾å›æ”¶å™¨ä¹‹ZGCè¯¦è§£"><!---->GC åƒåœ¾å›æ”¶å™¨ä¹‹ZGCè¯¦è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/GC%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E4%B9%8BCMS%20GC%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90%E4%B8%8E%E8%A7%A3%E5%86%B3.html" aria-label="GC åƒåœ¾å›æ”¶å™¨ä¹‹CMS GCé—®é¢˜åˆ†æä¸è§£å†³"><!---->GC åƒåœ¾å›æ”¶å™¨ä¹‹CMS GCé—®é¢˜åˆ†æä¸è§£å†³<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20JVM%20%E8%B0%83%E4%BC%98%E5%8F%82%E6%95%B0.html" aria-label="è°ƒè¯•æ’é”™ä¹‹ JVM è°ƒä¼˜å‚æ•°"><!---->è°ƒè¯•æ’é”™ä¹‹ JVM è°ƒä¼˜å‚æ•°<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20Java%20%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90%E4%B9%8B%E5%A0%86%E5%86%85%E5%AD%98%E5%92%8CMetaSpace%E5%86%85%E5%AD%98.html" aria-label="è°ƒè¯•æ’é”™ Java å†…å­˜åˆ†æä¹‹å †å†…å­˜å’ŒMetaSpaceå†…å­˜"><!---->è°ƒè¯•æ’é”™ Java å†…å­˜åˆ†æä¹‹å †å†…å­˜å’ŒMetaSpaceå†…å­˜<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20Java%20%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90%E4%B9%8B%E5%A0%86%E5%A4%96%E5%86%85%E5%AD%98.html" aria-label="è°ƒè¯•æ’é”™ Java å†…å­˜åˆ†æä¹‹å †å¤–å†…å­˜"><!---->è°ƒè¯•æ’é”™ Java å†…å­˜åˆ†æä¹‹å †å¤–å†…å­˜<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20Java%20%E7%BA%BF%E7%A8%8B%E5%88%86%E6%9E%90%E4%B9%8B%E7%BA%BF%E7%A8%8BDump%E5%88%86%E6%9E%90.html" aria-label="è°ƒè¯•æ’é”™ Java çº¿ç¨‹åˆ†æä¹‹çº¿ç¨‹Dumpåˆ†æ"><!---->è°ƒè¯•æ’é”™ Java çº¿ç¨‹åˆ†æä¹‹çº¿ç¨‹Dumpåˆ†æ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20Java%20%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E4%B9%8BLinux%E5%91%BD%E4%BB%A4.html" aria-label="è°ƒè¯•æ’é”™ Java é—®é¢˜æ’æŸ¥ä¹‹Linuxå‘½ä»¤"><!---->è°ƒè¯•æ’é”™ Java é—®é¢˜æ’æŸ¥ä¹‹Linuxå‘½ä»¤<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20Java%20%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E4%B9%8B%E5%B7%A5%E5%85%B7%E5%8D%95.html" aria-label="è°ƒè¯•æ’é”™ Java é—®é¢˜æ’æŸ¥ä¹‹å·¥å…·å•"><!---->è°ƒè¯•æ’é”™ Java é—®é¢˜æ’æŸ¥ä¹‹å·¥å…·å•<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20Java%20%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E4%B9%8BJVM%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7.html" aria-label="è°ƒè¯•æ’é”™ Java é—®é¢˜æ’æŸ¥ä¹‹JVMå¯è§†åŒ–å·¥å…·"><!---->è°ƒè¯•æ’é”™ Java é—®é¢˜æ’æŸ¥ä¹‹JVMå¯è§†åŒ–å·¥å…·<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20Java%20%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E4%B9%8B%E5%BA%94%E7%94%A8%E5%9C%A8%E7%BA%BF%E8%B0%83%E8%AF%95Arthas.html" aria-label="è°ƒè¯•æ’é”™ Java é—®é¢˜æ’æŸ¥ä¹‹åº”ç”¨åœ¨çº¿è°ƒè¯•Arthas"><!---->è°ƒè¯•æ’é”™ Java é—®é¢˜æ’æŸ¥ä¹‹åº”ç”¨åœ¨çº¿è°ƒè¯•Arthas<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20Java%20%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E4%B9%8B%E4%BD%BF%E7%94%A8IDEA%E6%9C%AC%E5%9C%B0%E8%B0%83%E8%AF%95%E5%92%8C%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95.html" aria-label="è°ƒè¯•æ’é”™ Java é—®é¢˜æ’æŸ¥ä¹‹ä½¿ç”¨IDEAæœ¬åœ°è°ƒè¯•å’Œè¿œç¨‹è°ƒè¯•"><!---->è°ƒè¯•æ’é”™ Java é—®é¢˜æ’æŸ¥ä¹‹ä½¿ç”¨IDEAæœ¬åœ°è°ƒè¯•å’Œè¿œç¨‹è°ƒè¯•<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20Java%E5%8A%A8%E6%80%81%E8%B0%83%E8%AF%95%E6%8A%80%E6%9C%AF%E5%8E%9F%E7%90%86.html" aria-label="è°ƒè¯•æ’é”™ JavaåŠ¨æ€è°ƒè¯•æŠ€æœ¯åŸç†"><!---->è°ƒè¯•æ’é”™ JavaåŠ¨æ€è°ƒè¯•æŠ€æœ¯åŸç†<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="vp-sidebar-title">Java8 æ–¹æ³•å¼•</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->è°ƒè¯•æ’é”™ Java çº¿ç¨‹åˆ†æä¹‹çº¿ç¨‹Dumpåˆ†æ</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://cactusli.net" target="_blank" rel="noopener noreferrer">Cactus li</a></span><span property="author" content="Cactus li"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2024å¹´3æœˆ17æ—¥</span><meta property="datePublished" content="2024-03-17T17:08:41.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon" name="eye"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="vp-pageview waline-pageview-count" data-path="/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20Java%20%E7%BA%BF%E7%A8%8B%E5%88%86%E6%9E%90%E4%B9%8B%E7%BA%BF%E7%A8%8BDump%E5%88%86%E6%9E%90.html" data-page-key="/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20Java%20%E7%BA%BF%E7%A8%8B%E5%88%86%E6%9E%90%E4%B9%8B%E7%BA%BF%E7%A8%8BDump%E5%88%86%E6%9E%90.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 19 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT19M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color8 clickable" role="navigation">Java</span><!--]--><meta property="articleSection" content="Java"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8 clickable" role="navigation">Java</span><span class="page-tag-item color7 clickable" role="navigation">JVM</span><!--]--><meta property="keywords" content="Java,JVM"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#thread-dumpä»‹ç»"># Thread Dumpä»‹ç»</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯thread-dump"># ä»€ä¹ˆæ˜¯Thread Dump</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#thread-dumpç‰¹ç‚¹"># Thread Dumpç‰¹ç‚¹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#thread-dumpæŠ“å–"># Thread DumpæŠ“å–</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#thread-dumpåˆ†æ"># Thread Dumpåˆ†æ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#thread-dumpä¿¡æ¯"># Thread Dumpä¿¡æ¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#threadçŠ¶æ€åˆ†æ"># ThreadçŠ¶æ€åˆ†æ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å…³é”®çŠ¶æ€åˆ†æ"># å…³é”®çŠ¶æ€åˆ†æ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å…³é”®çŠ¶æ€ç¤ºä¾‹"># å…³é”®çŠ¶æ€ç¤ºä¾‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ¡ˆä¾‹åˆ†æ"># æ¡ˆä¾‹åˆ†æ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#é—®é¢˜åœºæ™¯"># é—®é¢˜åœºæ™¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ­»é”"># æ­»é”</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#çƒ­é”"># çƒ­é”</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#jvmé‡è¦çº¿ç¨‹"># JVMé‡è¦çº¿ç¨‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å‚è€ƒæ–‡ç« "># å‚è€ƒæ–‡ç« </a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><blockquote><p>Thread Dumpæ˜¯éå¸¸æœ‰ç”¨çš„è¯Šæ–­Javaåº”ç”¨é—®é¢˜çš„å·¥å…·ã€‚</p></blockquote><ul><li>è°ƒè¯•æ’é”™ Java çº¿ç¨‹åˆ†æä¹‹çº¿ç¨‹Dumpåˆ†æ <ul><li>Thread Dumpä»‹ç» <ul><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFthread-dump">ä»€ä¹ˆæ˜¯Thread Dump</a></li><li><a href="#thread-dump%E7%89%B9%E7%82%B9">Thread Dumpç‰¹ç‚¹</a></li><li><a href="#thread-dump%E6%8A%93%E5%8F%96">Thread DumpæŠ“å–</a></li></ul></li><li>Thread Dumpåˆ†æ <ul><li><a href="#thread-dump%E4%BF%A1%E6%81%AF">Thread Dumpä¿¡æ¯</a></li><li><a href="#thread%E7%8A%B6%E6%80%81%E5%88%86%E6%9E%90">ThreadçŠ¶æ€åˆ†æ</a></li><li><a href="#%E5%85%B3%E9%94%AE%E7%8A%B6%E6%80%81%E5%88%86%E6%9E%90">å…³é”®çŠ¶æ€åˆ†æ</a></li><li><a href="#%E5%85%B3%E9%94%AE%E7%8A%B6%E6%80%81%E7%A4%BA%E4%BE%8B">å…³é”®çŠ¶æ€ç¤ºä¾‹</a></li></ul></li><li>æ¡ˆä¾‹åˆ†æ <ul><li><a href="#%E9%97%AE%E9%A2%98%E5%9C%BA%E6%99%AF">é—®é¢˜åœºæ™¯</a></li><li><a href="#%E6%AD%BB%E9%94%81">æ­»é”</a></li><li><a href="#%E7%83%AD%E9%94%81">çƒ­é”</a></li></ul></li><li><a href="#jvm%E9%87%8D%E8%A6%81%E7%BA%BF%E7%A8%8B">JVMé‡è¦çº¿ç¨‹</a></li><li><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0">å‚è€ƒæ–‡ç« </a></li></ul></li></ul><h2 id="thread-dumpä»‹ç»" tabindex="-1"><a class="header-anchor" href="#thread-dumpä»‹ç»"><span><a href="#thread-dump%E4%BB%8B%E7%BB%8D">#</a> Thread Dumpä»‹ç»</span></a></h2><h3 id="ä»€ä¹ˆæ˜¯thread-dump" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯thread-dump"><span><a href="#%E4%BB%80%E4%B9%88%E6%98%AFthread-dump">#</a> ä»€ä¹ˆæ˜¯Thread Dump</span></a></h3><p>Thread Dumpæ˜¯éå¸¸æœ‰ç”¨çš„è¯Šæ–­Javaåº”ç”¨é—®é¢˜çš„å·¥å…·ã€‚æ¯ä¸€ä¸ªJavaè™šæ‹Ÿæœºéƒ½æœ‰åŠæ—¶ç”Ÿæˆæ‰€æœ‰çº¿ç¨‹åœ¨æŸä¸€ç‚¹çŠ¶æ€çš„thread-dumpçš„èƒ½åŠ›ï¼Œè™½ç„¶å„ä¸ª Javaè™šæ‹Ÿæœºæ‰“å°çš„thread dumpç•¥æœ‰ä¸åŒï¼Œä½†æ˜¯ å¤§å¤šéƒ½æä¾›äº†å½“å‰æ´»åŠ¨çº¿ç¨‹çš„å¿«ç…§ï¼ŒåŠJVMä¸­æ‰€æœ‰Javaçº¿ç¨‹çš„å †æ ˆè·Ÿè¸ªä¿¡æ¯ï¼Œå †æ ˆä¿¡æ¯ä¸€èˆ¬åŒ…å«å®Œæ•´çš„ç±»ååŠæ‰€æ‰§è¡Œçš„æ–¹æ³•ï¼Œå¦‚æœå¯èƒ½çš„è¯è¿˜æœ‰æºä»£ç çš„è¡Œæ•°ã€‚</p><h3 id="thread-dumpç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#thread-dumpç‰¹ç‚¹"><span><a href="#thread-dump%E7%89%B9%E7%82%B9">#</a> Thread Dumpç‰¹ç‚¹</span></a></h3><ul><li>èƒ½åœ¨å„ç§æ“ä½œç³»ç»Ÿä¸‹ä½¿ç”¨ï¼›</li><li>èƒ½åœ¨å„ç§Javaåº”ç”¨æœåŠ¡å™¨ä¸‹ä½¿ç”¨ï¼›</li><li>èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨è€Œä¸å½±å“ç³»ç»Ÿçš„æ€§èƒ½ï¼›</li><li>èƒ½å°†é—®é¢˜ç›´æ¥å®šä½åˆ°åº”ç”¨ç¨‹åºçš„ä»£ç è¡Œä¸Šï¼›</li></ul><h3 id="thread-dumpæŠ“å–" tabindex="-1"><a class="header-anchor" href="#thread-dumpæŠ“å–"><span><a href="#thread-dump%E6%8A%93%E5%8F%96">#</a> Thread DumpæŠ“å–</span></a></h3><p>ä¸€èˆ¬å½“æœåŠ¡å™¨æŒ‚èµ·ï¼Œå´©æºƒæˆ–è€…æ€§èƒ½ä½ä¸‹æ—¶ï¼Œå°±éœ€è¦æŠ“å–æœåŠ¡å™¨çš„çº¿ç¨‹å †æ ˆï¼ˆThread Dumpï¼‰ç”¨äºåç»­çš„åˆ†æã€‚åœ¨å®é™…è¿è¡Œä¸­ï¼Œå¾€å¾€ä¸€æ¬¡ dumpçš„ä¿¡æ¯ï¼Œè¿˜ä¸è¶³ä»¥ç¡®è®¤é—®é¢˜ã€‚ä¸ºäº†åæ˜ çº¿ç¨‹çŠ¶æ€çš„åŠ¨æ€å˜åŒ–ï¼Œéœ€è¦æ¥è¿å¤šæ¬¡åšthread dumpï¼Œæ¯æ¬¡é—´éš”10-20sï¼Œå»ºè®®è‡³å°‘äº§ç”Ÿä¸‰æ¬¡ dumpä¿¡æ¯ï¼Œå¦‚æœæ¯æ¬¡ dumpéƒ½æŒ‡å‘åŒä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ‰ç¡®å®šé—®é¢˜çš„å…¸å‹æ€§ã€‚</p><ul><li>æ“ä½œç³»ç»Ÿå‘½ä»¤è·å–ThreadDump</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">ps</span><span style="color:#98C379;"> â€“ef</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">grep</span><span style="color:#98C379;"> java</span></span>
<span class="line"><span style="color:#56B6C2;">kill</span><span style="color:#D19A66;"> -3</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">pi</span><span style="color:#ABB2BF;">d&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼š</p><blockquote><p>ä¸€å®šè¦è°¨æ…, ä¸€æ­¥ä¸æ…å°±å¯èƒ½è®©æœåŠ¡å™¨è¿›ç¨‹è¢«æ€æ­»ã€‚kill -9 å‘½ä»¤ä¼šæ€æ­»è¿›ç¨‹ã€‚</p></blockquote><ul><li>JVM è‡ªå¸¦çš„å·¥å…·è·å–çº¿ç¨‹å †æ ˆ</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">jps</span><span style="color:#98C379;"> æˆ–</span><span style="color:#98C379;"> ps</span><span style="color:#98C379;"> â€“ef</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">grep</span><span style="color:#98C379;"> java</span><span style="color:#98C379;"> ï¼ˆè·å–PIDï¼‰</span></span>
<span class="line"><span style="color:#61AFEF;">jstack</span><span style="color:#ABB2BF;"> [-l </span><span style="color:#98C379;">]</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">pi</span><span style="color:#ABB2BF;">d&gt; | </span><span style="color:#61AFEF;">tee</span><span style="color:#D19A66;"> -a</span><span style="color:#98C379;"> jstack.logï¼ˆè·å–ThreadDumpï¼‰</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="thread-dumpåˆ†æ" tabindex="-1"><a class="header-anchor" href="#thread-dumpåˆ†æ"><span><a href="#thread-dump%E5%88%86%E6%9E%90">#</a> Thread Dumpåˆ†æ</span></a></h2><h3 id="thread-dumpä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#thread-dumpä¿¡æ¯"><span><a href="#thread-dump%E4%BF%A1%E6%81%AF">#</a> Thread Dumpä¿¡æ¯</span></a></h3><ul><li>å¤´éƒ¨ä¿¡æ¯ï¼šæ—¶é—´ï¼ŒJVMä¿¡æ¯</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">2011-11-02</span><span style="color:#98C379;"> 19:05:06</span><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#61AFEF;">Full</span><span style="color:#98C379;"> thread</span><span style="color:#98C379;"> dump</span><span style="color:#98C379;"> Java</span><span style="color:#98C379;"> HotSpot</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">TM</span><span style="color:#ABB2BF;">) </span><span style="color:#98C379;">Server</span><span style="color:#98C379;"> VM</span><span style="color:#ABB2BF;"> (16.3-b01 </span><span style="color:#98C379;">mixed</span><span style="color:#98C379;"> mode</span><span style="color:#ABB2BF;">):</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>çº¿ç¨‹INFOä¿¡æ¯å—ï¼š</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">1.</span><span style="color:#98C379;"> &quot;Timer-0&quot;</span><span style="color:#98C379;"> daemon</span><span style="color:#98C379;"> prio=</span><span style="color:#D19A66;">10</span><span style="color:#98C379;"> tid=</span><span style="color:#D19A66;">0xac190c00</span><span style="color:#98C379;"> nid=</span><span style="color:#D19A66;">0xaef</span><span style="color:#98C379;"> in</span><span style="color:#98C379;"> Object.wait</span><span style="color:#ABB2BF;">() [0xae77d000] </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># çº¿ç¨‹åç§°ï¼šTimer-0ï¼›çº¿ç¨‹ç±»å‹ï¼šdaemonï¼›ä¼˜å…ˆçº§: 10ï¼Œé»˜è®¤æ˜¯5ï¼›</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># JVMçº¿ç¨‹idï¼štid=0xac190c00ï¼ŒJVMå†…éƒ¨çº¿ç¨‹çš„å”¯ä¸€æ ‡è¯†ï¼ˆé€šè¿‡java.lang.Thread.getId()è·å–ï¼Œé€šå¸¸ç”¨è‡ªå¢æ–¹å¼å®ç°ï¼‰ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># å¯¹åº”ç³»ç»Ÿçº¿ç¨‹idï¼ˆNativeThread IDï¼‰ï¼šnid=0xaefï¼Œå’Œtopå‘½ä»¤æŸ¥çœ‹çš„çº¿ç¨‹pidå¯¹åº”ï¼Œä¸è¿‡ä¸€ä¸ªæ˜¯10è¿›åˆ¶ï¼Œä¸€ä¸ªæ˜¯16è¿›åˆ¶ã€‚ï¼ˆé€šè¿‡å‘½ä»¤ï¼štop -H -p pidï¼Œå¯ä»¥æŸ¥çœ‹è¯¥è¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹ä¿¡æ¯ï¼‰</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># çº¿ç¨‹çŠ¶æ€ï¼šin Object.wait()ï¼›</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># èµ·å§‹æ ˆåœ°å€ï¼š[0xae77d000]ï¼Œå¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œé€šè¿‡JVMå†…å­˜æŸ¥çœ‹å·¥å…·ï¼Œèƒ½å¤Ÿçœ‹å‡ºçº¿ç¨‹æ˜¯åœ¨å“ªå„¿ä¸ªå¯¹è±¡ä¸Šç­‰å¾…ï¼›</span></span>
<span class="line"><span style="color:#61AFEF;">2.</span><span style="color:#98C379;">  java.lang.Thread.State:</span><span style="color:#98C379;"> TIMED_WAITING</span><span style="color:#ABB2BF;"> (on </span><span style="color:#98C379;">object</span><span style="color:#98C379;"> monitor</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">3.</span><span style="color:#98C379;">  at</span><span style="color:#98C379;"> java.lang.Object.wait</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Native</span><span style="color:#98C379;"> Method</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">4.</span><span style="color:#D19A66;">  -waiting</span><span style="color:#98C379;"> on</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">0xb3885f6</span><span style="color:#ABB2BF;">0&gt; (a </span><span style="color:#98C379;">java.util.TaskQueue</span><span style="color:#ABB2BF;">)     </span><span style="color:#7F848E;font-style:italic;"># ç»§ç»­wait </span></span>
<span class="line"><span style="color:#61AFEF;">5.</span><span style="color:#98C379;">  at</span><span style="color:#98C379;"> java.util.TimerThread.mainLoop</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Timer.java:509</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">6.</span><span style="color:#D19A66;">  -locked</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">0xb3885f6</span><span style="color:#ABB2BF;">0&gt; (a </span><span style="color:#98C379;">java.util.TaskQueue</span><span style="color:#ABB2BF;">)         </span><span style="color:#7F848E;font-style:italic;"># å·²ç»locked</span></span>
<span class="line"><span style="color:#61AFEF;">7.</span><span style="color:#98C379;">  at</span><span style="color:#98C379;"> java.util.TimerThread.run</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Timer.java:462</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">Java</span><span style="color:#98C379;"> thread</span><span style="color:#98C379;"> statck</span><span style="color:#98C379;"> traceï¼šæ˜¯ä¸Šé¢2-7è¡Œçš„ä¿¡æ¯ã€‚åˆ°ç›®å‰ä¸ºæ­¢è¿™æ˜¯æœ€é‡è¦çš„æ•°æ®ï¼ŒJava</span><span style="color:#98C379;"> stack</span><span style="color:#98C379;"> traceæä¾›äº†å¤§éƒ¨åˆ†ä¿¡æ¯æ¥ç²¾ç¡®å®šä½é—®é¢˜æ ¹æºã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Java thread statck traceè¯¦è§£ï¼š</li></ul><p><strong>å †æ ˆä¿¡æ¯åº”è¯¥é€†å‘è§£è¯»</strong>ï¼šç¨‹åºå…ˆæ‰§è¡Œçš„æ˜¯ç¬¬7è¡Œï¼Œç„¶åæ˜¯ç¬¬6è¡Œï¼Œä¾æ¬¡ç±»æ¨ã€‚</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">-</span><span style="color:#98C379;"> locked</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">0xb3885f6</span><span style="color:#ABB2BF;">0&gt; (a </span><span style="color:#98C379;">java.util.ArrayList</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">-</span><span style="color:#98C379;"> waiting</span><span style="color:#98C379;"> on</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">0xb3885f6</span><span style="color:#ABB2BF;">0&gt; (a </span><span style="color:#98C379;">java.util.ArrayList</span><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¹Ÿå°±æ˜¯è¯´å¯¹è±¡å…ˆä¸Šé”ï¼Œé”ä½å¯¹è±¡0xb3885f60ï¼Œç„¶åé‡Šæ”¾è¯¥å¯¹è±¡é”ï¼Œè¿›å…¥waitingçŠ¶æ€</strong>ã€‚ä¸ºå•¥ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µå‘¢ï¼Ÿçœ‹çœ‹ä¸‹é¢çš„javaä»£ç ç¤ºä¾‹ï¼Œå°±ä¼šæ˜ç™½ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">synchronized</span><span style="color:#E06C75;">(obj) {  </span></span>
<span class="line"><span style="color:#ABB2BF;">   .........</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E5C07B;">   obj</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">wait</span><span style="color:#ABB2BF;">();</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">   .........</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚ä¸Šï¼Œçº¿ç¨‹çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå…ˆç”¨ <code>synchronized</code> è·å¾—äº†è¿™ä¸ªå¯¹è±¡çš„ Monitorï¼ˆå¯¹åº”äº <code>locked &lt;0xb3885f60&gt;</code> ï¼‰ã€‚å½“æ‰§è¡Œåˆ° <code>obj.wait()</code>ï¼Œçº¿ç¨‹å³æ”¾å¼ƒäº† Monitorçš„æ‰€æœ‰æƒï¼Œè¿›å…¥ â€œwait setâ€é˜Ÿåˆ—ï¼ˆå¯¹åº”äº <code>waiting on &lt;0xb3885f60&gt;</code> ï¼‰ã€‚</p><p><strong>åœ¨å †æ ˆçš„ç¬¬ä¸€è¡Œä¿¡æ¯ä¸­ï¼Œè¿›ä¸€æ­¥æ ‡æ˜äº†çº¿ç¨‹åœ¨ä»£ç çº§çš„çŠ¶æ€</strong>ï¼Œä¾‹å¦‚ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">java.lang.Thread.State:</span><span style="color:#98C379;"> TIMED_WAITING</span><span style="color:#ABB2BF;"> (parking)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è§£é‡Šå¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">blocked</span><span style="color:#ABB2BF;">|</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&gt; </span><span style="color:#61AFEF;">This</span><span style="color:#98C379;"> thread</span><span style="color:#98C379;"> tried</span><span style="color:#98C379;"> to</span><span style="color:#98C379;"> enter</span><span style="color:#98C379;"> asynchronized</span><span style="color:#98C379;"> block,</span><span style="color:#98C379;"> but</span><span style="color:#98C379;"> the</span><span style="color:#98C379;"> lock</span><span style="color:#98C379;"> was</span><span style="color:#98C379;"> taken</span><span style="color:#98C379;"> by</span><span style="color:#98C379;"> another</span><span style="color:#98C379;"> thread.</span><span style="color:#98C379;"> This</span><span style="color:#98C379;"> thread</span><span style="color:#98C379;"> isblocked</span><span style="color:#98C379;"> until</span><span style="color:#98C379;"> the</span><span style="color:#98C379;"> lock</span><span style="color:#98C379;"> gets</span><span style="color:#98C379;"> released.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">blocked</span><span style="color:#ABB2BF;"> (on </span><span style="color:#98C379;">thin</span><span style="color:#98C379;"> lock</span><span style="color:#ABB2BF;">)|</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&gt; </span><span style="color:#61AFEF;">This</span><span style="color:#98C379;"> is</span><span style="color:#98C379;"> the</span><span style="color:#98C379;"> same</span><span style="color:#98C379;"> state</span><span style="color:#98C379;"> asblocked,</span><span style="color:#98C379;"> but</span><span style="color:#98C379;"> the</span><span style="color:#98C379;"> lock</span><span style="color:#98C379;"> in</span><span style="color:#98C379;"> question</span><span style="color:#98C379;"> is</span><span style="color:#98C379;"> a</span><span style="color:#98C379;"> thin</span><span style="color:#98C379;"> lock.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">waiting</span><span style="color:#ABB2BF;">|</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&gt; </span><span style="color:#61AFEF;">This</span><span style="color:#98C379;"> thread</span><span style="color:#98C379;"> calledObject.wait</span><span style="color:#ABB2BF;">() </span><span style="color:#98C379;">on</span><span style="color:#98C379;"> an</span><span style="color:#98C379;"> object.</span><span style="color:#98C379;"> The</span><span style="color:#98C379;"> thread</span><span style="color:#98C379;"> will</span><span style="color:#98C379;"> remain</span><span style="color:#98C379;"> there</span><span style="color:#98C379;"> until</span><span style="color:#98C379;"> some</span><span style="color:#98C379;"> otherthread</span><span style="color:#98C379;"> sends</span><span style="color:#98C379;"> a</span><span style="color:#98C379;"> notification</span><span style="color:#98C379;"> to</span><span style="color:#98C379;"> that</span><span style="color:#98C379;"> object.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">sleeping</span><span style="color:#ABB2BF;">|</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&gt; </span><span style="color:#61AFEF;">This</span><span style="color:#98C379;"> thread</span><span style="color:#98C379;"> calledjava.lang.Thread.sleep</span><span style="color:#ABB2BF;">()</span><span style="color:#98C379;">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">parked</span><span style="color:#ABB2BF;">|</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&gt; </span><span style="color:#61AFEF;">This</span><span style="color:#98C379;"> thread</span><span style="color:#98C379;"> calledjava.util.concurrent.locks.LockSupport.park</span><span style="color:#ABB2BF;">()</span><span style="color:#98C379;">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">suspended</span><span style="color:#ABB2BF;">|</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&gt; </span><span style="color:#61AFEF;">The</span><span style="color:#98C379;"> thread&#39;s execution wassuspended by java.lang.Thread.suspend() or a JVMTI agent call.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="threadçŠ¶æ€åˆ†æ" tabindex="-1"><a class="header-anchor" href="#threadçŠ¶æ€åˆ†æ"><span><a href="#thread%E7%8A%B6%E6%80%81%E5%88%86%E6%9E%90">#</a> ThreadçŠ¶æ€åˆ†æ</span></a></h3><p>çº¿ç¨‹çš„çŠ¶æ€æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸œè¥¿ï¼Œå› æ­¤thread dumpä¸­ä¼šæ˜¾ç¤ºè¿™äº›çŠ¶æ€ï¼Œé€šè¿‡å¯¹è¿™äº›çŠ¶æ€çš„åˆ†æï¼Œèƒ½å¤Ÿå¾—å‡ºçº¿ç¨‹çš„è¿è¡ŒçŠ¶å†µï¼Œè¿›è€Œå‘ç°å¯èƒ½å­˜åœ¨çš„é—®é¢˜ã€‚<strong>çº¿ç¨‹çš„çŠ¶æ€åœ¨Thread.Stateè¿™ä¸ªæšä¸¾ç±»å‹ä¸­å®šä¹‰</strong>ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#C678DD;"> enum</span><span style="color:#E5C07B;"> State</span><span style="color:#E06C75;">   </span></span>
<span class="line"><span style="color:#E06C75;">{  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">       /** </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * Thread state for a thread which has not yet started. </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        */</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#D19A66;">       NEW</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">         </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">       /** </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * Thread state for a runnable thread.  A thread in the runnable </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * state is executing in the Java virtual machine but it may </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * be waiting for other resources from the operating system </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * such as processor. </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        */</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#D19A66;">       RUNNABLE</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">         </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">       /** </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * Thread state for a thread blocked waiting for a monitor lock. </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * A thread in the blocked state is waiting for a monitor lock </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * to enter a synchronized block/method or  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * reenter a synchronized block/method after calling </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * {</span><span style="color:#C678DD;font-style:italic;">@link</span><span style="color:#E5C07B;font-style:italic;"> Object</span><span style="color:#7F848E;font-style:italic;">#</span><span style="color:#E06C75;font-style:italic;">wait()</span><span style="color:#7F848E;font-style:italic;"> Object.wait}. </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        */</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#D19A66;">       BLOCKED</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">     </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">       /** </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * Thread state for a waiting thread. </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * A thread is in the waiting state due to calling one of the  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * following methods: </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * &lt;ul&gt; </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        *   &lt;li&gt;{</span><span style="color:#C678DD;font-style:italic;">@link</span><span style="color:#E5C07B;font-style:italic;"> Object</span><span style="color:#7F848E;font-style:italic;">#</span><span style="color:#E06C75;font-style:italic;">wait()</span><span style="color:#7F848E;font-style:italic;"> Object.wait} with no timeout&lt;/li&gt; </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        *   &lt;li&gt;{</span><span style="color:#C678DD;font-style:italic;">@link</span><span style="color:#7F848E;font-style:italic;"> #</span><span style="color:#E06C75;font-style:italic;">join()</span><span style="color:#7F848E;font-style:italic;"> Thread.join} with no timeout&lt;/li&gt; </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        *   &lt;li&gt;{</span><span style="color:#C678DD;font-style:italic;">@link</span><span style="color:#E5C07B;font-style:italic;"> LockSupport</span><span style="color:#7F848E;font-style:italic;">#</span><span style="color:#E06C75;font-style:italic;">park()</span><span style="color:#7F848E;font-style:italic;"> LockSupport.park}&lt;/li&gt; </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * &lt;/ul&gt; </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        *  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * &lt;p&gt;A thread in the waiting state is waiting for another thread to </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * perform a particular action.   </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * For example, a thread that has called &lt;tt&gt;Object.wait()&lt;/tt&gt; </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * on an object is waiting for another thread to call  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * &lt;tt&gt;Object.notify()&lt;/tt&gt; or &lt;tt&gt;Object.notifyAll()&lt;/tt&gt; on  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * that object. A thread that has called &lt;tt&gt;Thread.join()&lt;/tt&gt;  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * is waiting for a specified thread to terminate. </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        */</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#D19A66;">       WAITING</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">         </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">       /** </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * Thread state for a waiting thread with a specified waiting time. </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * A thread is in the timed waiting state due to calling one of  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * the following methods with a specified positive waiting time: </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * &lt;ul&gt; </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        *   &lt;li&gt;{@link #sleep Thread.sleep}&lt;/li&gt; </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        *   &lt;li&gt;{</span><span style="color:#C678DD;font-style:italic;">@link</span><span style="color:#E5C07B;font-style:italic;"> Object</span><span style="color:#7F848E;font-style:italic;">#</span><span style="color:#E06C75;font-style:italic;">wait(long)</span><span style="color:#7F848E;font-style:italic;"> Object.wait} with timeout&lt;/li&gt; </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        *   &lt;li&gt;{</span><span style="color:#C678DD;font-style:italic;">@link</span><span style="color:#7F848E;font-style:italic;"> #</span><span style="color:#E06C75;font-style:italic;">join(long)</span><span style="color:#7F848E;font-style:italic;"> Thread.join} with timeout&lt;/li&gt; </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        *   &lt;li&gt;{@link LockSupport#parkNanos LockSupport.parkNanos}&lt;/li&gt;  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        *   &lt;li&gt;{@link LockSupport#parkUntil LockSupport.parkUntil}&lt;/li&gt; </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * &lt;/ul&gt; </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        */</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#D19A66;">       TIMED_WAITING</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">       /** </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * Thread state for a terminated thread. </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        * The thread has completed execution. </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        */</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#D19A66;">       TERMINATED</span><span style="color:#ABB2BF;">;</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>NEWï¼š</li></ul><p>æ¯ä¸€ä¸ªçº¿ç¨‹ï¼Œåœ¨å †å†…å­˜ä¸­éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„Threadå¯¹è±¡ã€‚Thread t = new Thread();å½“åˆšåˆšåœ¨å †å†…å­˜ä¸­åˆ›å»ºThreadå¯¹è±¡ï¼Œè¿˜æ²¡æœ‰è°ƒç”¨t.start()æ–¹æ³•ä¹‹å‰ï¼Œçº¿ç¨‹å°±å¤„åœ¨NEWçŠ¶æ€ã€‚åœ¨è¿™ä¸ªçŠ¶æ€ä¸Šï¼Œçº¿ç¨‹ä¸æ™®é€šçš„javaå¯¹è±¡æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå°±ä»…ä»…æ˜¯ä¸€ä¸ªå †å†…å­˜ä¸­çš„å¯¹è±¡ã€‚</p><ul><li>RUNNABLEï¼š</li></ul><p>è¯¥çŠ¶æ€è¡¨ç¤ºçº¿ç¨‹å…·å¤‡æ‰€æœ‰è¿è¡Œæ¡ä»¶ï¼Œåœ¨è¿è¡Œé˜Ÿåˆ—ä¸­å‡†å¤‡æ“ä½œç³»ç»Ÿçš„è°ƒåº¦ï¼Œæˆ–è€…æ­£åœ¨è¿è¡Œã€‚ è¿™ä¸ªçŠ¶æ€çš„çº¿ç¨‹æ¯”è¾ƒæ­£å¸¸ï¼Œä½†å¦‚æœçº¿ç¨‹é•¿æ—¶é—´åœç•™åœ¨åœ¨è¿™ä¸ªçŠ¶æ€å°±ä¸æ­£å¸¸äº†ï¼Œè¿™è¯´æ˜çº¿ç¨‹è¿è¡Œçš„æ—¶é—´å¾ˆé•¿ï¼ˆå­˜åœ¨æ€§èƒ½é—®é¢˜ï¼‰ï¼Œæˆ–è€…æ˜¯çº¿ç¨‹ä¸€ç›´å¾—ä¸å¾—æ‰§è¡Œçš„æœºä¼šï¼ˆå­˜åœ¨çº¿ç¨‹é¥¥é¥¿çš„é—®é¢˜ï¼‰ã€‚</p><ul><li>BLOCKEDï¼š</li></ul><p>çº¿ç¨‹æ­£åœ¨ç­‰å¾…è·å–javaå¯¹è±¡çš„ç›‘è§†å™¨(ä¹Ÿå«å†…ç½®é”)ï¼Œå³çº¿ç¨‹æ­£åœ¨ç­‰å¾…è¿›å…¥ç”±synchronizedä¿æŠ¤çš„æ–¹æ³•æˆ–è€…ä»£ç å—ã€‚synchronizedç”¨æ¥ä¿è¯åŸå­æ€§ï¼Œä»»æ„æ—¶åˆ»æœ€å¤šåªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹è¿›å…¥è¯¥ä¸´ç•ŒåŒºåŸŸï¼Œå…¶ä»–çº¿ç¨‹åªèƒ½æ’é˜Ÿç­‰å¾…ã€‚</p><ul><li>WAITINGï¼š</li></ul><p>å¤„åœ¨è¯¥çº¿ç¨‹çš„çŠ¶æ€ï¼Œæ­£åœ¨ç­‰å¾…æŸä¸ªäº‹ä»¶çš„å‘ç”Ÿï¼Œåªæœ‰ç‰¹å®šçš„æ¡ä»¶æ»¡è¶³ï¼Œæ‰èƒ½è·å¾—æ‰§è¡Œæœºä¼šã€‚è€Œäº§ç”Ÿè¿™ä¸ªç‰¹å®šçš„äº‹ä»¶ï¼Œé€šå¸¸éƒ½æ˜¯å¦ä¸€ä¸ªçº¿ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸å‘ç”Ÿç‰¹å®šçš„äº‹ä»¶ï¼Œé‚£ä¹ˆå¤„åœ¨è¯¥çŠ¶æ€çš„çº¿ç¨‹ä¸€ç›´ç­‰å¾…ï¼Œä¸èƒ½è·å–æ‰§è¡Œçš„æœºä¼šã€‚æ¯”å¦‚ï¼š</p><p>Açº¿ç¨‹è°ƒç”¨äº†objå¯¹è±¡çš„obj.wait()æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰çº¿ç¨‹è°ƒç”¨obj.notifyæˆ–obj.notifyAllï¼Œé‚£ä¹ˆAçº¿ç¨‹å°±æ²¡æœ‰åŠæ³•æ¢å¤è¿è¡Œï¼› å¦‚æœAçº¿ç¨‹è°ƒç”¨äº†LockSupport.park()ï¼Œæ²¡æœ‰åˆ«çš„çº¿ç¨‹è°ƒç”¨LockSupport.unpark(A)ï¼Œé‚£ä¹ˆAæ²¡æœ‰åŠæ³•æ¢å¤è¿è¡Œã€‚ TIMED_WAITINGï¼š</p><p>J.U.Cä¸­å¾ˆå¤šä¸çº¿ç¨‹ç›¸å…³ç±»ï¼Œéƒ½æä¾›äº†é™æ—¶ç‰ˆæœ¬å’Œä¸é™æ—¶ç‰ˆæœ¬çš„APIã€‚TIMED_WAITINGæ„å‘³ç€çº¿ç¨‹è°ƒç”¨äº†é™æ—¶ç‰ˆæœ¬çš„APIï¼Œæ­£åœ¨ç­‰å¾…æ—¶é—´æµé€ã€‚å½“ç­‰å¾…æ—¶é—´è¿‡å»åï¼Œçº¿ç¨‹ä¸€æ ·å¯ä»¥æ¢å¤è¿è¡Œã€‚å¦‚æœçº¿ç¨‹è¿›å…¥äº†WAITINGçŠ¶æ€ï¼Œä¸€å®šè¦ç‰¹å®šçš„äº‹ä»¶å‘ç”Ÿæ‰èƒ½æ¢å¤è¿è¡Œï¼›è€Œå¤„åœ¨TIMED_WAITINGçš„çº¿ç¨‹ï¼Œå¦‚æœç‰¹å®šçš„äº‹ä»¶å‘ç”Ÿæˆ–è€…æ˜¯æ—¶é—´æµé€å®Œæ¯•ï¼Œéƒ½ä¼šæ¢å¤è¿è¡Œã€‚</p><ul><li>TERMINATEDï¼š</li></ul><p>çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œå®Œrunæ–¹æ³•æ­£å¸¸è¿”å›ï¼Œæˆ–è€…æŠ›å‡ºäº†è¿è¡Œæ—¶å¼‚å¸¸è€Œç»“æŸï¼Œçº¿ç¨‹éƒ½ä¼šåœç•™åœ¨è¿™ä¸ªçŠ¶æ€ã€‚è¿™ä¸ªæ—¶å€™çº¿ç¨‹åªå‰©ä¸‹Threadå¯¹è±¡äº†ï¼Œæ²¡æœ‰ä»€ä¹ˆç”¨äº†ã€‚</p><h3 id="å…³é”®çŠ¶æ€åˆ†æ" tabindex="-1"><a class="header-anchor" href="#å…³é”®çŠ¶æ€åˆ†æ"><span><a href="#%E5%85%B3%E9%94%AE%E7%8A%B6%E6%80%81%E5%88%86%E6%9E%90">#</a> å…³é”®çŠ¶æ€åˆ†æ</span></a></h3><ul><li><strong>Wait on condition</strong>ï¼šThe thread is either sleeping or waiting to be notified by another thread.</li></ul><p>è¯¥çŠ¶æ€è¯´æ˜å®ƒåœ¨ç­‰å¾…å¦ä¸€ä¸ªæ¡ä»¶çš„å‘ç”Ÿï¼Œæ¥æŠŠè‡ªå·±å”¤é†’ï¼Œæˆ–è€…å¹²è„†å®ƒæ˜¯è°ƒç”¨äº† sleep(n)ã€‚</p><p>æ­¤æ—¶çº¿ç¨‹çŠ¶æ€å¤§è‡´ä¸ºä»¥ä¸‹å‡ ç§ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">java.lang.Thread.State:</span><span style="color:#98C379;"> WAITING</span><span style="color:#ABB2BF;"> (parking)ï¼šä¸€ç›´ç­‰é‚£ä¸ªæ¡ä»¶å‘ç”Ÿï¼›</span></span>
<span class="line"><span style="color:#61AFEF;">java.lang.Thread.State:</span><span style="color:#98C379;"> TIMED_WAITING</span><span style="color:#ABB2BF;"> (parkingæˆ–sleeping)ï¼šå®šæ—¶çš„ï¼Œé‚£ä¸ªæ¡ä»¶ä¸åˆ°æ¥ï¼Œä¹Ÿå°†å®šæ—¶å”¤é†’è‡ªå·±ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>Waiting for Monitor Entry å’Œ in Object.wait()</strong>ï¼šThe thread is waiting to get the lock for an object (some other thread may be holding the lock). This happens if two or more threads try to execute synchronized code. Note that the lock is always for an object and not for individual methods.</li></ul><p>åœ¨å¤šçº¿ç¨‹çš„JAVAç¨‹åºä¸­ï¼Œå®ç°çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥ï¼Œå°±è¦è¯´è¯´ Monitorã€‚<strong>Monitoræ˜¯Javaä¸­ç”¨ä»¥å®ç°çº¿ç¨‹ä¹‹é—´çš„äº’æ–¥ä¸åä½œçš„ä¸»è¦æ‰‹æ®µï¼Œå®ƒå¯ä»¥çœ‹æˆæ˜¯å¯¹è±¡æˆ–è€…Classçš„é”ã€‚æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ï¼Œä¹Ÿä»…æœ‰ä¸€ä¸ª Monitor</strong> ã€‚ä¸‹é¢è¿™ä¸ªå›¾ï¼Œæè¿°äº†çº¿ç¨‹å’Œ Monitorä¹‹é—´å…³ç³»ï¼Œä»¥åŠçº¿ç¨‹çš„çŠ¶æ€è½¬æ¢å›¾ï¼š</p><figure><img src="https://lixuanfengs.github.io/blog-images/vp/Java/java-jvm-debug-1.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><p>å¦‚ä¸Šå›¾ï¼Œæ¯ä¸ªMonitoråœ¨æŸä¸ªæ—¶åˆ»ï¼Œåªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æ‹¥æœ‰ï¼Œ<strong>è¯¥çº¿ç¨‹å°±æ˜¯ â€œActiveThreadâ€ï¼Œè€Œå…¶å®ƒçº¿ç¨‹éƒ½æ˜¯ â€œWaiting Threadâ€ï¼Œåˆ†åˆ«åœ¨ä¸¤ä¸ªé˜Ÿåˆ—â€œEntry Setâ€å’Œâ€œWait Setâ€é‡Œç­‰å€™</strong>ã€‚åœ¨â€œEntry Setâ€ä¸­ç­‰å¾…çš„çº¿ç¨‹çŠ¶æ€æ˜¯â€œWaiting for monitor entryâ€ï¼Œè€Œåœ¨â€œWait Setâ€ä¸­ç­‰å¾…çš„çº¿ç¨‹çŠ¶æ€æ˜¯â€œin Object.wait()â€ã€‚</p><p>å…ˆçœ‹â€œEntry Setâ€é‡Œé¢çš„çº¿ç¨‹ã€‚æˆ‘ä»¬ç§°è¢« synchronizedä¿æŠ¤èµ·æ¥çš„ä»£ç æ®µä¸ºä¸´ç•ŒåŒºã€‚<strong>å½“ä¸€ä¸ªçº¿ç¨‹ç”³è¯·è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œå®ƒå°±è¿›å…¥äº†â€œEntry Setâ€é˜Ÿåˆ—</strong>ã€‚å¯¹åº”çš„ codeå°±åƒï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">synchronized</span><span style="color:#E06C75;">(obj) {</span></span>
<span class="line"><span style="color:#ABB2BF;">   .........</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ—¶æœ‰ä¸¤ç§å¯èƒ½æ€§ï¼š</p><ul><li>è¯¥ monitorä¸è¢«å…¶å®ƒçº¿ç¨‹æ‹¥æœ‰ï¼Œ Entry Seté‡Œé¢ä¹Ÿæ²¡æœ‰å…¶å®ƒç­‰å¾…çº¿ç¨‹ã€‚æœ¬çº¿ç¨‹å³æˆä¸ºç›¸åº”ç±»æˆ–è€…å¯¹è±¡çš„ Monitorçš„ Ownerï¼Œæ‰§è¡Œä¸´ç•ŒåŒºçš„ä»£ç ã€‚</li><li>è¯¥ monitorè¢«å…¶å®ƒçº¿ç¨‹æ‹¥æœ‰ï¼Œæœ¬çº¿ç¨‹åœ¨ Entry Seté˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚</li></ul><p>åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œçº¿ç¨‹å°†å¤„äº â€œRunnableâ€çš„çŠ¶æ€ï¼Œè€Œç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œçº¿ç¨‹ DUMPä¼šæ˜¾ç¤ºå¤„äº â€œwaiting for monitor entryâ€ã€‚å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">&quot;Thread-0&quot;</span><span style="color:#98C379;"> prio=</span><span style="color:#D19A66;">10</span><span style="color:#98C379;"> tid=</span><span style="color:#D19A66;">0x08222eb0</span><span style="color:#98C379;"> nid=</span><span style="color:#D19A66;">0x9</span><span style="color:#98C379;"> waiting</span><span style="color:#98C379;"> for</span><span style="color:#98C379;"> monitor</span><span style="color:#98C379;"> entry</span><span style="color:#ABB2BF;"> [0xf927b000..0xf927bdb8] </span></span>
<span class="line"><span style="color:#61AFEF;">at</span><span style="color:#98C379;"> testthread.WaitThread.run</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">WaitThread.java:39</span><span style="color:#ABB2BF;">) </span></span>
<span class="line"><span style="color:#61AFEF;">-</span><span style="color:#98C379;"> waiting</span><span style="color:#98C379;"> to</span><span style="color:#98C379;"> lock</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">0xef63bf0</span><span style="color:#ABB2BF;">8&gt; (a </span><span style="color:#98C379;">java.lang.Object</span><span style="color:#ABB2BF;">) </span></span>
<span class="line"><span style="color:#61AFEF;">-</span><span style="color:#98C379;"> locked</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">0xef63beb</span><span style="color:#ABB2BF;">8&gt; (a </span><span style="color:#98C379;">java.util.ArrayList</span><span style="color:#ABB2BF;">) </span></span>
<span class="line"><span style="color:#61AFEF;">at</span><span style="color:#98C379;"> java.lang.Thread.run</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Thread.java:595</span><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸´ç•ŒåŒºçš„è®¾ç½®ï¼Œæ˜¯ä¸ºäº†ä¿è¯å…¶å†…éƒ¨çš„ä»£ç æ‰§è¡Œçš„åŸå­æ€§å’Œå®Œæ•´æ€§</strong>ã€‚ä½†æ˜¯å› ä¸ºä¸´ç•ŒåŒºåœ¨ä»»ä½•æ—¶é—´åªå…è®¸çº¿ç¨‹ä¸²è¡Œé€šè¿‡ï¼Œè¿™å’Œæˆ‘ä»¬å¤šçº¿ç¨‹çš„ç¨‹åºçš„åˆè¡·æ˜¯ç›¸åçš„ã€‚<strong>å¦‚æœåœ¨å¤šçº¿ç¨‹çš„ç¨‹åºä¸­ï¼Œå¤§é‡ä½¿ç”¨ synchronizedï¼Œæˆ–è€…ä¸é€‚å½“çš„ä½¿ç”¨äº†å®ƒï¼Œä¼šé€ æˆå¤§é‡çº¿ç¨‹åœ¨ä¸´ç•ŒåŒºçš„å…¥å£ç­‰å¾…ï¼Œé€ æˆç³»ç»Ÿçš„æ€§èƒ½å¤§å¹…ä¸‹é™</strong>ã€‚å¦‚æœåœ¨çº¿ç¨‹ DUMPä¸­å‘ç°äº†è¿™ä¸ªæƒ…å†µï¼Œåº”è¯¥å®¡æŸ¥æºç ï¼Œæ”¹è¿›ç¨‹åºã€‚</p><p>å†çœ‹â€œWait Setâ€é‡Œé¢çš„çº¿ç¨‹ã€‚<strong>å½“çº¿ç¨‹è·å¾—äº† Monitorï¼Œè¿›å…¥äº†ä¸´ç•ŒåŒºä¹‹åï¼Œå¦‚æœå‘ç°çº¿ç¨‹ç»§ç»­è¿è¡Œçš„æ¡ä»¶æ²¡æœ‰æ»¡è¶³ï¼Œå®ƒåˆ™è°ƒç”¨å¯¹è±¡ï¼ˆä¸€èˆ¬å°±æ˜¯è¢« synchronized çš„å¯¹è±¡ï¼‰çš„ wait() æ–¹æ³•ï¼Œæ”¾å¼ƒ Monitorï¼Œè¿›å…¥ â€œWait Setâ€é˜Ÿåˆ—ã€‚åªæœ‰å½“åˆ«çš„çº¿ç¨‹åœ¨è¯¥å¯¹è±¡ä¸Šè°ƒç”¨äº† notify() æˆ–è€… notifyAll()ï¼Œâ€œWait Setâ€é˜Ÿåˆ—ä¸­çº¿ç¨‹æ‰å¾—åˆ°æœºä¼šå»ç«äº‰</strong>ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹è·å¾—å¯¹è±¡çš„Monitorï¼Œæ¢å¤åˆ°è¿è¡Œæ€ã€‚åœ¨ â€œWait Setâ€ä¸­çš„çº¿ç¨‹ï¼Œ DUMPä¸­è¡¨ç°ä¸ºï¼š in Object.wait()ã€‚å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">&quot;Thread-1&quot;</span><span style="color:#98C379;"> prio=</span><span style="color:#D19A66;">10</span><span style="color:#98C379;"> tid=</span><span style="color:#D19A66;">0x08223250</span><span style="color:#98C379;"> nid=</span><span style="color:#D19A66;">0xa</span><span style="color:#98C379;"> in</span><span style="color:#98C379;"> Object.wait</span><span style="color:#ABB2BF;">() [0xef47a000..0xef47aa38] </span></span>
<span class="line"><span style="color:#61AFEF;"> at</span><span style="color:#98C379;"> java.lang.Object.wait</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Native</span><span style="color:#98C379;"> Method</span><span style="color:#ABB2BF;">) </span></span>
<span class="line"><span style="color:#61AFEF;"> -</span><span style="color:#98C379;"> waiting</span><span style="color:#98C379;"> on</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">0xef63beb</span><span style="color:#ABB2BF;">8&gt; (a </span><span style="color:#98C379;">java.util.ArrayList</span><span style="color:#ABB2BF;">) </span></span>
<span class="line"><span style="color:#61AFEF;"> at</span><span style="color:#98C379;"> java.lang.Object.wait</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Object.java:474</span><span style="color:#ABB2BF;">) </span></span>
<span class="line"><span style="color:#61AFEF;"> at</span><span style="color:#98C379;"> testthread.MyWaitThread.run</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">MyWaitThread.java:40</span><span style="color:#ABB2BF;">) </span></span>
<span class="line"><span style="color:#61AFEF;"> -</span><span style="color:#98C379;"> locked</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">0xef63beb</span><span style="color:#ABB2BF;">8&gt; (a </span><span style="color:#98C379;">java.util.ArrayList</span><span style="color:#ABB2BF;">) </span></span>
<span class="line"><span style="color:#61AFEF;"> at</span><span style="color:#98C379;"> java.lang.Thread.run</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Thread.java:595</span><span style="color:#ABB2BF;">) </span></span>
<span class="line"><span style="color:#61AFEF;">ç»¼ä¸Šï¼Œä¸€èˆ¬CPUå¾ˆå¿™æ—¶ï¼Œåˆ™å…³æ³¨runnableçš„çº¿ç¨‹ï¼ŒCPUå¾ˆé—²æ—¶ï¼Œåˆ™å…³æ³¨waiting</span><span style="color:#98C379;"> for</span><span style="color:#98C379;"> monitor</span><span style="color:#98C379;"> entryçš„çº¿ç¨‹ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>JDK 5.0 çš„ Lock</strong></li></ul><p>ä¸Šé¢æåˆ°å¦‚æœ synchronizedå’Œ monitoræœºåˆ¶è¿ç”¨ä¸å½“ï¼Œå¯èƒ½ä¼šé€ æˆå¤šçº¿ç¨‹ç¨‹åºçš„æ€§èƒ½é—®é¢˜ã€‚åœ¨ JDK 5.0ä¸­ï¼Œå¼•å…¥äº† Lockæœºåˆ¶ï¼Œä»è€Œä½¿å¼€å‘è€…èƒ½æ›´çµæ´»çš„å¼€å‘é«˜æ€§èƒ½çš„å¹¶å‘å¤šçº¿ç¨‹ç¨‹åºï¼Œå¯ä»¥æ›¿ä»£ä»¥å¾€ JDKä¸­çš„ synchronizedå’Œ Monitorçš„ æœºåˆ¶ã€‚ä½†æ˜¯ï¼Œ<strong>è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸º Lockç±»åªæ˜¯ä¸€ä¸ªæ™®é€šç±»ï¼ŒJVMæ— ä»å¾—çŸ¥ Lockå¯¹è±¡çš„å ç”¨æƒ…å†µï¼Œæ‰€ä»¥åœ¨çº¿ç¨‹ DUMPä¸­ï¼Œä¹Ÿä¸ä¼šåŒ…å«å…³äº Lockçš„ä¿¡æ¯</strong>ï¼Œ å…³äºæ­»é”ç­‰é—®é¢˜ï¼Œå°±ä¸å¦‚ç”¨ synchronizedçš„ç¼–ç¨‹æ–¹å¼å®¹æ˜“è¯†åˆ«ã€‚</p><h3 id="å…³é”®çŠ¶æ€ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å…³é”®çŠ¶æ€ç¤ºä¾‹"><span><a href="#%E5%85%B3%E9%94%AE%E7%8A%B6%E6%80%81%E7%A4%BA%E4%BE%8B">#</a> å…³é”®çŠ¶æ€ç¤ºä¾‹</span></a></h3><ul><li><strong>æ˜¾ç¤ºBLOCKEDçŠ¶æ€</strong></li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">package</span><span style="color:#C678DD;"> jstack</span><span style="color:#ABB2BF;">;</span><span style="color:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#C678DD;"> class</span><span style="color:#E5C07B;"> BlockedState</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#C678DD;">    private</span><span style="color:#C678DD;"> static</span><span style="color:#E5C07B;"> Object</span><span style="color:#E06C75;"> object </span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Object</span><span style="color:#E06C75;">()</span><span style="color:#ABB2BF;">;</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#C678DD;">    public</span><span style="color:#C678DD;"> static</span><span style="color:#C678DD;"> void</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">    {  </span></span>
<span class="line"><span style="color:#E5C07B;">        Runnable</span><span style="color:#E06C75;"> task</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Runnable</span><span style="color:#ABB2BF;">() {  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            @</span><span style="color:#E5C07B;">Override</span><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">            public</span><span style="color:#C678DD;"> void</span><span style="color:#61AFEF;"> run</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">            {  </span></span>
<span class="line"><span style="color:#C678DD;">                synchronized</span><span style="color:#ABB2BF;"> (object)  </span></span>
<span class="line"><span style="color:#ABB2BF;">                {  </span></span>
<span class="line"><span style="color:#C678DD;">                    long</span><span style="color:#E06C75;"> begin</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> System</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">currentTimeMillis</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">                    long</span><span style="color:#E06C75;"> end</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> System</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">currentTimeMillis</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                    // è®©çº¿ç¨‹è¿è¡Œ5åˆ†é’Ÿ,ä¼šä¸€ç›´æŒæœ‰objectçš„ç›‘è§†å™¨  </span></span>
<span class="line"><span style="color:#C678DD;">                    while</span><span style="color:#ABB2BF;"> ((end </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;"> begin) </span><span style="color:#56B6C2;">&lt;=</span><span style="color:#D19A66;"> 5</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 60</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 1000</span><span style="color:#ABB2BF;">)  </span></span>
<span class="line"><span style="color:#ABB2BF;">                    {  </span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">                    }  </span></span>
<span class="line"><span style="color:#ABB2BF;">                }  </span></span>
<span class="line"><span style="color:#ABB2BF;">            }  </span></span>
<span class="line"><span style="color:#ABB2BF;">        };  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">        new</span><span style="color:#61AFEF;"> Thread</span><span style="color:#ABB2BF;">(task, </span><span style="color:#98C379;">&quot;t1&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">start</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#C678DD;">        new</span><span style="color:#61AFEF;"> Thread</span><span style="color:#ABB2BF;">(task, </span><span style="color:#98C379;">&quot;t2&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">start</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…ˆè·å–objectçš„çº¿ç¨‹ä¼šæ‰§è¡Œ5åˆ†é’Ÿï¼Œ<strong>è¿™5åˆ†é’Ÿå†…ä¼šä¸€ç›´æŒæœ‰objectçš„ç›‘è§†å™¨ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ— æ³•æ‰§è¡Œå¤„åœ¨BLOCKEDçŠ¶æ€</strong>ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E5C07B;">Full</span><span style="color:#E06C75;"> thread dump </span><span style="color:#E5C07B;">Java</span><span style="color:#61AFEF;"> HotSpot</span><span style="color:#E06C75;">(TM) </span><span style="color:#E5C07B;">Server</span><span style="color:#61AFEF;"> VM</span><span style="color:#E06C75;"> (</span><span style="color:#D19A66;">20.12</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">b01 mixed mode)</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#98C379;">&quot;DestroyJavaVM&quot;</span><span style="color:#E06C75;"> prio</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">6</span><span style="color:#E06C75;"> tid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x00856c00</span><span style="color:#E06C75;"> nid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x1314</span><span style="color:#E06C75;"> waiting on condition [</span><span style="color:#D19A66;">0x00000000</span><span style="color:#E06C75;">]  </span></span>
<span class="line"><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">State</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;"> RUNNABLE</span><span style="color:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">&quot;t2&quot;</span><span style="color:#E06C75;"> prio</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">6</span><span style="color:#E06C75;"> tid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x27d7a800</span><span style="color:#E06C75;"> nid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x1350</span><span style="color:#E06C75;"> waiting </span><span style="color:#C678DD;">for</span><span style="color:#E06C75;"> monitor entry [</span><span style="color:#D19A66;">0x2833f000</span><span style="color:#E06C75;">]  </span></span>
<span class="line"><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">State</span><span style="color:#C678DD;">:</span><span style="color:#61AFEF;"> BLOCKED</span><span style="color:#E06C75;"> (on object monitor)  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">jstack</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">BlockedState$1</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BlockedState</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">17</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#56B6C2;">     -</span><span style="color:#E06C75;"> waiting to lock </span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;">0x1cfcdc00</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> (a </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;">)  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">662</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">&quot;t1&quot;</span><span style="color:#E06C75;"> prio</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">6</span><span style="color:#E06C75;"> tid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x27d79400</span><span style="color:#E06C75;"> nid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x1338</span><span style="color:#E06C75;"> runnable [</span><span style="color:#D19A66;">0x282ef000</span><span style="color:#E06C75;">]  </span></span>
<span class="line"><span style="color:#E5C07B;"> java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">State</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;"> RUNNABLE</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">jstack</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">BlockedState$1</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BlockedState</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">22</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#56B6C2;">     -</span><span style="color:#E06C75;"> locked </span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;">0x1cfcdc00</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> (a </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;">)  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">662</span><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡thread dumpå¯ä»¥çœ‹åˆ°ï¼š<strong>t2çº¿ç¨‹ç¡®å®å¤„åœ¨BLOCKED (on object monitor)ã€‚waiting for monitor entry ç­‰å¾…è¿›å…¥synchronizedä¿æŠ¤çš„åŒºåŸŸ</strong>ã€‚</p><ul><li><strong>æ˜¾ç¤ºWAITINGçŠ¶æ€</strong></li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">package</span><span style="color:#C678DD;"> jstack</span><span style="color:#ABB2BF;">;</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#C678DD;"> class</span><span style="color:#E5C07B;"> WaitingState</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#C678DD;">    private</span><span style="color:#C678DD;"> static</span><span style="color:#E5C07B;"> Object</span><span style="color:#E06C75;"> object </span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Object</span><span style="color:#E06C75;">()</span><span style="color:#ABB2BF;">;</span><span style="color:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    public</span><span style="color:#C678DD;"> static</span><span style="color:#C678DD;"> void</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">    {  </span></span>
<span class="line"><span style="color:#E5C07B;">        Runnable</span><span style="color:#E06C75;"> task</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Runnable</span><span style="color:#ABB2BF;">() {  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            @</span><span style="color:#E5C07B;">Override</span><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">            public</span><span style="color:#C678DD;"> void</span><span style="color:#61AFEF;"> run</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">            {  </span></span>
<span class="line"><span style="color:#C678DD;">                synchronized</span><span style="color:#ABB2BF;"> (object)  </span></span>
<span class="line"><span style="color:#ABB2BF;">                {  </span></span>
<span class="line"><span style="color:#C678DD;">                    long</span><span style="color:#E06C75;"> begin</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> System</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">currentTimeMillis</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#C678DD;">                    long</span><span style="color:#E06C75;"> end</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> System</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">currentTimeMillis</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                    // è®©çº¿ç¨‹è¿è¡Œ5åˆ†é’Ÿ,ä¼šä¸€ç›´æŒæœ‰objectçš„ç›‘è§†å™¨  </span></span>
<span class="line"><span style="color:#C678DD;">                    while</span><span style="color:#ABB2BF;"> ((end </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;"> begin) </span><span style="color:#56B6C2;">&lt;=</span><span style="color:#D19A66;"> 5</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 60</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 1000</span><span style="color:#ABB2BF;">)  </span></span>
<span class="line"><span style="color:#ABB2BF;">                    {  </span></span>
<span class="line"><span style="color:#C678DD;">                        try</span><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">                        {  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                            // è¿›å…¥ç­‰å¾…çš„åŒæ—¶,ä¼šè¿›å…¥é‡Šæ”¾ç›‘è§†å™¨  </span></span>
<span class="line"><span style="color:#E5C07B;">                            object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">wait</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#ABB2BF;">                        } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">InterruptedException</span><span style="color:#E06C75;font-style:italic;"> e</span><span style="color:#ABB2BF;">)  </span></span>
<span class="line"><span style="color:#ABB2BF;">                        {  </span></span>
<span class="line"><span style="color:#E5C07B;">                            e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">printStackTrace</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#ABB2BF;">                        }  </span></span>
<span class="line"><span style="color:#ABB2BF;">                    }  </span></span>
<span class="line"><span style="color:#ABB2BF;">                }  </span></span>
<span class="line"><span style="color:#ABB2BF;">            }  </span></span>
<span class="line"><span style="color:#ABB2BF;">        };  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">        new</span><span style="color:#61AFEF;"> Thread</span><span style="color:#ABB2BF;">(task, </span><span style="color:#98C379;">&quot;t1&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">start</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#C678DD;">        new</span><span style="color:#61AFEF;"> Thread</span><span style="color:#ABB2BF;">(task, </span><span style="color:#98C379;">&quot;t2&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">start</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">}</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E5C07B;">Full</span><span style="color:#E06C75;"> thread dump </span><span style="color:#E5C07B;">Java</span><span style="color:#61AFEF;"> HotSpot</span><span style="color:#E06C75;">(TM) </span><span style="color:#E5C07B;">Server</span><span style="color:#61AFEF;"> VM</span><span style="color:#E06C75;"> (</span><span style="color:#D19A66;">20.12</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">b01 mixed mode)</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">&quot;DestroyJavaVM&quot;</span><span style="color:#E06C75;"> prio</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">6</span><span style="color:#E06C75;"> tid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x00856c00</span><span style="color:#E06C75;"> nid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x1734</span><span style="color:#E06C75;"> waiting on condition [</span><span style="color:#D19A66;">0x00000000</span><span style="color:#E06C75;">]  </span></span>
<span class="line"><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">State</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;"> RUNNABLE</span><span style="color:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">&quot;t2&quot;</span><span style="color:#E06C75;"> prio</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">6</span><span style="color:#E06C75;"> tid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x27d7e000</span><span style="color:#E06C75;"> nid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x17f4</span><span style="color:#E06C75;"> in </span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">wait</span><span style="color:#ABB2BF;">()</span><span style="color:#E06C75;"> [</span><span style="color:#D19A66;">0x2833f000</span><span style="color:#E06C75;">]  </span></span>
<span class="line"><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">State</span><span style="color:#C678DD;">:</span><span style="color:#61AFEF;"> WAITING</span><span style="color:#E06C75;"> (on object monitor)  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">wait</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Native</span><span style="color:#ABB2BF;"> Method)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#56B6C2;">     -</span><span style="color:#E06C75;"> waiting on </span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;">0x1cfcdc00</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> (a </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;">)  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">wait</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">485</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">jstack</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">WaitingState$1</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">WaitingState</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">26</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#56B6C2;">     -</span><span style="color:#E06C75;"> locked </span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;">0x1cfcdc00</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> (a </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;">)  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">662</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">&quot;t1&quot;</span><span style="color:#E06C75;"> prio</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">6</span><span style="color:#E06C75;"> tid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x27d7d400</span><span style="color:#E06C75;"> nid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x17f0</span><span style="color:#E06C75;"> in </span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">wait</span><span style="color:#ABB2BF;">()</span><span style="color:#E06C75;"> [</span><span style="color:#D19A66;">0x282ef000</span><span style="color:#E06C75;">]  </span></span>
<span class="line"><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">State</span><span style="color:#C678DD;">:</span><span style="color:#61AFEF;"> WAITING</span><span style="color:#E06C75;"> (on object monitor)  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">wait</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Native</span><span style="color:#ABB2BF;"> Method)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#56B6C2;">     -</span><span style="color:#E06C75;"> waiting on </span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;">0x1cfcdc00</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> (a </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;">)  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">wait</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">485</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">jstack</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">WaitingState$1</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">WaitingState</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">26</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#56B6C2;">     -</span><span style="color:#E06C75;"> locked </span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;">0x1cfcdc00</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> (a </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;">)  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">662</span><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥å‘ç°t1å’Œt2éƒ½å¤„åœ¨WAITING (on object monitor)ï¼Œè¿›å…¥ç­‰å¾…çŠ¶æ€çš„åŸå› æ˜¯è°ƒç”¨äº†in Object.wait()ã€‚é€šè¿‡J.U.CåŒ…ä¸‹çš„é”å’Œæ¡ä»¶é˜Ÿåˆ—ï¼Œä¹Ÿæ˜¯è¿™ä¸ªæ•ˆæœï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å®è·µä¸‹ã€‚</p><ul><li><strong>æ˜¾ç¤ºTIMED_WAITINGçŠ¶æ€</strong></li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">package</span><span style="color:#C678DD;"> jstack</span><span style="color:#ABB2BF;">;</span><span style="color:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E5C07B;"> java.util.concurrent.TimeUnit</span><span style="color:#ABB2BF;">;</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E5C07B;"> java.util.concurrent.locks.Condition</span><span style="color:#ABB2BF;">;</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E5C07B;"> java.util.concurrent.locks.Lock</span><span style="color:#ABB2BF;">;</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E5C07B;"> java.util.concurrent.locks.ReentrantLock</span><span style="color:#ABB2BF;">;</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#C678DD;"> class</span><span style="color:#E5C07B;"> TimedWaitingState</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // javaçš„æ˜¾ç¤ºé”,ç±»ä¼¼javaå¯¹è±¡å†…ç½®çš„ç›‘è§†å™¨  </span></span>
<span class="line"><span style="color:#C678DD;">    private</span><span style="color:#C678DD;"> static</span><span style="color:#E5C07B;"> Lock</span><span style="color:#E06C75;"> lock </span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> ReentrantLock</span><span style="color:#E06C75;">()</span><span style="color:#ABB2BF;">;</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // é”å…³è”çš„æ¡ä»¶é˜Ÿåˆ—(ç±»ä¼¼äºobject.wait)  </span></span>
<span class="line"><span style="color:#C678DD;">    private</span><span style="color:#C678DD;"> static</span><span style="color:#E5C07B;"> Condition</span><span style="color:#E06C75;"> condition </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> lock</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">newCondition</span><span style="color:#ABB2BF;">();</span><span style="color:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    public</span><span style="color:#C678DD;"> static</span><span style="color:#C678DD;"> void</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">    {  </span></span>
<span class="line"><span style="color:#E5C07B;">        Runnable</span><span style="color:#E06C75;"> task</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Runnable</span><span style="color:#ABB2BF;">() {  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            @</span><span style="color:#E5C07B;">Override</span><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">            public</span><span style="color:#C678DD;"> void</span><span style="color:#61AFEF;"> run</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">            {  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // åŠ é”,è¿›å…¥ä¸´ç•ŒåŒº  </span></span>
<span class="line"><span style="color:#E5C07B;">                lock</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">lock</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">                try</span><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">                {  </span></span>
<span class="line"><span style="color:#E5C07B;">                    condition</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">await</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">TimeUnit</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">MINUTES</span><span style="color:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#ABB2BF;">                } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">InterruptedException</span><span style="color:#E06C75;font-style:italic;"> e</span><span style="color:#ABB2BF;">)  </span></span>
<span class="line"><span style="color:#ABB2BF;">                {  </span></span>
<span class="line"><span style="color:#E5C07B;">                    e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">printStackTrace</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#ABB2BF;">                }  </span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è§£é”,é€€å‡ºä¸´ç•ŒåŒº  </span></span>
<span class="line"><span style="color:#E5C07B;">                lock</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">unlock</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#ABB2BF;">            }  </span></span>
<span class="line"><span style="color:#ABB2BF;">        };  </span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">        new</span><span style="color:#61AFEF;"> Thread</span><span style="color:#ABB2BF;">(task, </span><span style="color:#98C379;">&quot;t1&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">start</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#C678DD;">        new</span><span style="color:#61AFEF;"> Thread</span><span style="color:#ABB2BF;">(task, </span><span style="color:#98C379;">&quot;t2&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">start</span><span style="color:#ABB2BF;">();  </span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">}</span><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#E5C07B;">Full</span><span style="color:#E06C75;"> thread dump </span><span style="color:#E5C07B;">Java</span><span style="color:#61AFEF;"> HotSpot</span><span style="color:#E06C75;">(TM) </span><span style="color:#E5C07B;">Server</span><span style="color:#61AFEF;"> VM</span><span style="color:#E06C75;"> (</span><span style="color:#D19A66;">20.12</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">b01 mixed mode)</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">&quot;DestroyJavaVM&quot;</span><span style="color:#E06C75;"> prio</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">6</span><span style="color:#E06C75;"> tid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x00856c00</span><span style="color:#E06C75;"> nid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x169c</span><span style="color:#E06C75;"> waiting on condition [</span><span style="color:#D19A66;">0x00000000</span><span style="color:#E06C75;">]  </span></span>
<span class="line"><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">State</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;"> RUNNABLE</span><span style="color:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">&quot;t2&quot;</span><span style="color:#E06C75;"> prio</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">6</span><span style="color:#E06C75;"> tid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x27d7d800</span><span style="color:#E06C75;"> nid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0xc30</span><span style="color:#E06C75;"> waiting on condition [</span><span style="color:#D19A66;">0x2833f000</span><span style="color:#E06C75;">]  </span></span>
<span class="line"><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">State</span><span style="color:#C678DD;">:</span><span style="color:#61AFEF;"> TIMED_WAITING</span><span style="color:#E06C75;"> (parking)  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">sun</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">misc</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Unsafe</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">park</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Native</span><span style="color:#ABB2BF;"> Method)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#56B6C2;">     -</span><span style="color:#E06C75;"> parking to wait </span><span style="color:#C678DD;">for</span><span style="color:#56B6C2;">  &lt;</span><span style="color:#D19A66;">0x1cfce5b8</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> (a </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">util</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">concurrent</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">locks</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">AbstractQueuedSynchronizer$ConditionObject</span><span style="color:#E06C75;">)  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">util</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">concurrent</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">locks</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">LockSupport</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parkNanos</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">LockSupport</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">196</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">util</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">concurrent</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">locks</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">AbstractQueuedSynchronizer$ConditionObject</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">await</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AbstractQueuedSynchronizer</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">2116</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">jstack</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">TimedWaitingState$1</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">TimedWaitingState</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">28</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">662</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">&quot;t1&quot;</span><span style="color:#E06C75;"> prio</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">6</span><span style="color:#E06C75;"> tid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x280d0c00</span><span style="color:#E06C75;"> nid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x16e0</span><span style="color:#E06C75;"> waiting on condition [</span><span style="color:#D19A66;">0x282ef000</span><span style="color:#E06C75;">]  </span></span>
<span class="line"><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">State</span><span style="color:#C678DD;">:</span><span style="color:#61AFEF;"> TIMED_WAITING</span><span style="color:#E06C75;"> (parking)  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">sun</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">misc</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Unsafe</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">park</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Native</span><span style="color:#ABB2BF;"> Method)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#56B6C2;">     -</span><span style="color:#E06C75;"> parking to wait </span><span style="color:#C678DD;">for</span><span style="color:#56B6C2;">  &lt;</span><span style="color:#D19A66;">0x1cfce5b8</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> (a </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">util</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">concurrent</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">locks</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">AbstractQueuedSynchronizer$ConditionObject</span><span style="color:#E06C75;">)  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">util</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">concurrent</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">locks</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">LockSupport</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parkNanos</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">LockSupport</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">196</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">util</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">concurrent</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">locks</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">AbstractQueuedSynchronizer$ConditionObject</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">await</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AbstractQueuedSynchronizer</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">2116</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">jstack</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">TimedWaitingState$1</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">TimedWaitingState</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">28</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;">     at </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Thread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">662</span><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°t1å’Œt2çº¿ç¨‹éƒ½å¤„åœ¨java.lang.Thread.State: TIMED_WAITING (parking)ï¼Œè¿™ä¸ªparkingä»£è¡¨æ˜¯è°ƒç”¨çš„JUCä¸‹çš„å·¥å…·ç±»ï¼Œè€Œä¸æ˜¯javaé»˜è®¤çš„ç›‘è§†å™¨ã€‚</p><h2 id="æ¡ˆä¾‹åˆ†æ" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹åˆ†æ"><span><a href="#%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90">#</a> æ¡ˆä¾‹åˆ†æ</span></a></h2><h3 id="é—®é¢˜åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜åœºæ™¯"><span><a href="#%E9%97%AE%E9%A2%98%E5%9C%BA%E6%99%AF">#</a> é—®é¢˜åœºæ™¯</span></a></h3><ul><li><strong>CPUé£™é«˜ï¼Œloadé«˜ï¼Œå“åº”å¾ˆæ…¢</strong><ol><li>ä¸€ä¸ªè¯·æ±‚è¿‡ç¨‹ä¸­å¤šæ¬¡dumpï¼›</li><li>å¯¹æ¯”å¤šæ¬¡dumpæ–‡ä»¶çš„runnableçº¿ç¨‹ï¼Œå¦‚æœæ‰§è¡Œçš„æ–¹æ³•æœ‰æ¯”è¾ƒå¤§å˜åŒ–ï¼Œè¯´æ˜æ¯”è¾ƒæ­£å¸¸ã€‚å¦‚æœåœ¨æ‰§è¡ŒåŒä¸€ä¸ªæ–¹æ³•ï¼Œå°±æœ‰ä¸€äº›é—®é¢˜äº†ï¼›</li></ol></li><li><strong>æŸ¥æ‰¾å ç”¨CPUæœ€å¤šçš„çº¿ç¨‹</strong><ol><li>ä½¿ç”¨å‘½ä»¤ï¼štop -H -p pidï¼ˆpidä¸ºè¢«æµ‹ç³»ç»Ÿçš„è¿›ç¨‹å·ï¼‰ï¼Œæ‰¾åˆ°å¯¼è‡´CPUé«˜çš„çº¿ç¨‹IDï¼Œå¯¹åº”thread dumpä¿¡æ¯ä¸­çº¿ç¨‹çš„nidï¼Œåªä¸è¿‡ä¸€ä¸ªæ˜¯åè¿›åˆ¶ï¼Œä¸€ä¸ªæ˜¯åå…­è¿›åˆ¶ï¼›</li><li>åœ¨thread dumpä¸­ï¼Œæ ¹æ®topå‘½ä»¤æŸ¥æ‰¾çš„çº¿ç¨‹idï¼ŒæŸ¥æ‰¾å¯¹åº”çš„çº¿ç¨‹å †æ ˆä¿¡æ¯ï¼›</li></ol></li><li><strong>CPUä½¿ç”¨ç‡ä¸é«˜ä½†æ˜¯å“åº”å¾ˆæ…¢</strong></li></ul><p>è¿›è¡Œdumpï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰å¾ˆå¤šthread struckåœ¨äº†i/oã€æ•°æ®åº“ç­‰åœ°æ–¹ï¼Œå®šä½ç“¶é¢ˆåŸå› ï¼›</p><ul><li><strong>è¯·æ±‚æ— æ³•å“åº”</strong></li></ul><p>å¤šæ¬¡dumpï¼Œå¯¹æ¯”æ˜¯å¦æ‰€æœ‰çš„runnableçº¿ç¨‹éƒ½ä¸€ç›´åœ¨æ‰§è¡Œç›¸åŒçš„æ–¹æ³•ï¼Œå¦‚æœæ˜¯çš„ï¼Œæ­å–œä½ ï¼Œé”ä½äº†ï¼</p><h3 id="æ­»é”" tabindex="-1"><a class="header-anchor" href="#æ­»é”"><span><a href="#%E6%AD%BB%E9%94%81">#</a> æ­»é”</span></a></h3><p>æ­»é”ç»å¸¸è¡¨ç°ä¸ºç¨‹åºçš„åœé¡¿ï¼Œæˆ–è€…ä¸å†å“åº”ç”¨æˆ·çš„è¯·æ±‚ã€‚ä»æ“ä½œç³»ç»Ÿä¸Šè§‚å¯Ÿï¼Œå¯¹åº”è¿›ç¨‹çš„CPUå ç”¨ç‡ä¸ºé›¶ï¼Œå¾ˆå¿«ä¼šä»topæˆ–prstatçš„è¾“å‡ºä¸­æ¶ˆå¤±ã€‚</p><p>æ¯”å¦‚åœ¨ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ˜¯ä¸ªè¾ƒä¸ºå…¸å‹çš„æ­»é”æƒ…å†µï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#98C379;">&quot;Thread-1&quot;</span><span style="color:#E06C75;"> prio</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">5</span><span style="color:#E06C75;"> tid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x00acc490</span><span style="color:#E06C75;"> nid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0xe50</span><span style="color:#E06C75;"> waiting </span><span style="color:#C678DD;">for</span><span style="color:#E06C75;"> monitor entry [</span><span style="color:#D19A66;">0x02d3f000</span><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">..</span><span style="color:#FFFFFF;">0x02d3fd68</span><span style="color:#E06C75;">] </span></span>
<span class="line"><span style="color:#E06C75;">at </span><span style="color:#E5C07B;">deadlockthreads</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">TestThread</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">TestThread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">31</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#56B6C2;">-</span><span style="color:#E06C75;"> waiting to lock </span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;">0x22c19f18</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> (a </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;">) </span></span>
<span class="line"><span style="color:#56B6C2;">-</span><span style="color:#E06C75;"> locked </span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;">0x22c19f20</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> (a </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;">) </span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">&quot;Thread-0&quot;</span><span style="color:#E06C75;"> prio</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">5</span><span style="color:#E06C75;"> tid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0x00accdb0</span><span style="color:#E06C75;"> nid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">0xdec</span><span style="color:#E06C75;"> waiting </span><span style="color:#C678DD;">for</span><span style="color:#E06C75;"> monitor entry [</span><span style="color:#D19A66;">0x02cff000</span><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">..</span><span style="color:#FFFFFF;">0x02cff9e8</span><span style="color:#E06C75;">] </span></span>
<span class="line"><span style="color:#E06C75;">at </span><span style="color:#E5C07B;">deadlockthreads</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">TestThread</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">TestThread</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">java</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">31</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#56B6C2;">-</span><span style="color:#E06C75;"> waiting to lock </span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;">0x22c19f20</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> (a </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;">) </span></span>
<span class="line"><span style="color:#56B6C2;">-</span><span style="color:#E06C75;"> locked </span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;">0x22c19f18</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> (a </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ JAVA 5ä¸­åŠ å¼ºäº†å¯¹æ­»é”çš„æ£€æµ‹ã€‚<strong>çº¿ç¨‹ Dumpä¸­å¯ä»¥ç›´æ¥æŠ¥å‘Šå‡º Javaçº§åˆ«çš„æ­»é”</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E5C07B;">Found</span><span style="color:#E06C75;"> one Java</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">level deadlock</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#56B6C2;">=============================</span><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#98C379;">&quot;Thread-1&quot;</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#E06C75;">waiting to lock monitor </span><span style="color:#D19A66;">0x0003f334</span><span style="color:#E06C75;"> (object </span><span style="color:#D19A66;">0x22c19f18</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> a </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#E06C75;">which is held by </span><span style="color:#98C379;">&quot;Thread-0&quot;</span><span style="color:#E06C75;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">&quot;Thread-0&quot;</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#E06C75;">waiting to lock monitor </span><span style="color:#D19A66;">0x0003f314</span><span style="color:#E06C75;"> (object </span><span style="color:#D19A66;">0x22c19f20</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> a </span><span style="color:#E5C07B;">java</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">lang</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#E06C75;">which is held by </span><span style="color:#98C379;">&quot;Thread-1&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="çƒ­é”" tabindex="-1"><a class="header-anchor" href="#çƒ­é”"><span><a href="#%E7%83%AD%E9%94%81">#</a> çƒ­é”</span></a></h3><p>çƒ­é”ï¼Œä¹Ÿå¾€å¾€æ˜¯å¯¼è‡´ç³»ç»Ÿæ€§èƒ½ç“¶é¢ˆçš„ä¸»è¦å› ç´ ã€‚å…¶è¡¨ç°ç‰¹å¾ä¸ºï¼š<strong>ç”±äºå¤šä¸ªçº¿ç¨‹å¯¹ä¸´ç•ŒåŒºï¼Œæˆ–è€…é”çš„ç«äº‰</strong>ï¼Œå¯èƒ½å‡ºç°ï¼š</p><ul><li><strong>é¢‘ç¹çš„çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ï¼šä»æ“ä½œç³»ç»Ÿå¯¹çº¿ç¨‹çš„è°ƒåº¦æ¥çœ‹ï¼Œå½“çº¿ç¨‹åœ¨ç­‰å¾…èµ„æºè€Œé˜»å¡çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†ä¹‹åˆ‡æ¢å‡ºæ¥ï¼Œæ”¾åˆ°ç­‰å¾…çš„é˜Ÿåˆ—ï¼Œå½“çº¿ç¨‹è·å¾—èµ„æºä¹‹åï¼Œè°ƒåº¦ç®—æ³•ä¼šå°†è¿™ä¸ªçº¿ç¨‹åˆ‡æ¢è¿›å»ï¼Œæ”¾åˆ°æ‰§è¡Œé˜Ÿåˆ—ä¸­ã€‚</li><li><strong>å¤§é‡çš„ç³»ç»Ÿè°ƒç”¨</strong>ï¼šå› ä¸ºçº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä»¥åŠçƒ­é”çš„ç«äº‰ï¼Œæˆ–è€…ä¸´ç•ŒåŒºçš„é¢‘ç¹çš„è¿›å‡ºï¼Œéƒ½å¯èƒ½å¯¼è‡´å¤§é‡çš„ç³»ç»Ÿè°ƒç”¨ã€‚</li><li><strong>å¤§éƒ¨åˆ†CPUå¼€é”€ç”¨åœ¨â€œç³»ç»Ÿæ€â€</strong>ï¼šçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå’Œç³»ç»Ÿè°ƒç”¨ï¼Œéƒ½ä¼šå¯¼è‡´ CPUåœ¨ â€œç³»ç»Ÿæ€ â€è¿è¡Œï¼Œæ¢è€Œè¨€ä¹‹ï¼Œè™½ç„¶ç³»ç»Ÿå¾ˆå¿™ç¢Œï¼Œä½†æ˜¯CPUç”¨åœ¨ â€œç”¨æˆ·æ€ â€çš„æ¯”ä¾‹è¾ƒå°ï¼Œåº”ç”¨ç¨‹åºå¾—ä¸åˆ°å……åˆ†çš„ CPUèµ„æºã€‚</li><li><strong>éšç€CPUæ•°ç›®çš„å¢å¤šï¼Œç³»ç»Ÿçš„æ€§èƒ½åè€Œä¸‹é™</strong>ã€‚å› ä¸ºCPUæ•°ç›®å¤šï¼ŒåŒæ—¶è¿è¡Œçš„çº¿ç¨‹å°±è¶Šå¤šï¼Œå¯èƒ½å°±ä¼šé€ æˆæ›´é¢‘ç¹çš„çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œç³»ç»Ÿæ€çš„CPUå¼€é”€ï¼Œä»è€Œå¯¼è‡´æ›´ç³Ÿç³•çš„æ€§èƒ½ã€‚</li></ul><p>ä¸Šé¢çš„æè¿°ï¼Œéƒ½æ˜¯ä¸€ä¸ª scalabilityï¼ˆå¯æ‰©å±•æ€§ï¼‰å¾ˆå·®çš„ç³»ç»Ÿçš„è¡¨ç°ã€‚ä»æ•´ä½“çš„æ€§èƒ½æŒ‡æ ‡çœ‹ï¼Œç”±äºçº¿ç¨‹çƒ­é”çš„å­˜åœ¨ï¼Œç¨‹åºçš„å“åº”æ—¶é—´ä¼šå˜é•¿ï¼Œååé‡ä¼šé™ä½ã€‚</p><p><strong>é‚£ä¹ˆï¼Œæ€ä¹ˆå»äº†è§£ â€œçƒ­é” â€å‡ºç°åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢</strong>ï¼Ÿ</p><p>ä¸€ä¸ªé‡è¦çš„æ–¹æ³•æ˜¯ ç»“åˆæ“ä½œç³»ç»Ÿçš„å„ç§å·¥å…·è§‚å¯Ÿç³»ç»Ÿèµ„æºä½¿ç”¨çŠ¶å†µï¼Œä»¥åŠæ”¶é›†Javaçº¿ç¨‹çš„DUMPä¿¡æ¯ï¼Œçœ‹çº¿ç¨‹éƒ½é˜»å¡åœ¨ä»€ä¹ˆæ–¹æ³•ä¸Šï¼Œäº†è§£åŸå› ï¼Œæ‰èƒ½æ‰¾åˆ°å¯¹åº”çš„è§£å†³æ–¹æ³•ã€‚</p><h2 id="jvmé‡è¦çº¿ç¨‹" tabindex="-1"><a class="header-anchor" href="#jvmé‡è¦çº¿ç¨‹"><span><a href="#jvm%E9%87%8D%E8%A6%81%E7%BA%BF%E7%A8%8B">#</a> JVMé‡è¦çº¿ç¨‹</span></a></h2><p>JVMè¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸€äº›æ¯”è¾ƒé‡è¦çš„çº¿ç¨‹ç½—åˆ—å¦‚ä¸‹ï¼š</p><table><thead><tr><th>çº¿ç¨‹åç§°</th><th>è§£é‡Šè¯´æ˜</th></tr></thead><tbody><tr><td>Attach Listener</td><td>Attach Listener çº¿ç¨‹æ˜¯è´Ÿè´£æ¥æ”¶åˆ°å¤–éƒ¨çš„å‘½ä»¤ï¼Œè€Œå¯¹è¯¥å‘½ä»¤è¿›è¡Œæ‰§è¡Œçš„å¹¶æŠŠç»“æœè¿”å›ç»™å‘é€è€…ã€‚é€šå¸¸æˆ‘ä»¬ä¼šç”¨ä¸€äº›å‘½ä»¤å»è¦æ±‚JVMç»™æˆ‘ä»¬ä¸€äº›åé¦ˆä¿¡æ¯ï¼Œå¦‚ï¼šjava -versionã€jmapã€jstackç­‰ç­‰ã€‚ å¦‚æœè¯¥çº¿ç¨‹åœ¨JVMå¯åŠ¨çš„æ—¶å€™æ²¡æœ‰åˆå§‹åŒ–ï¼Œé‚£ä¹ˆï¼Œåˆ™ä¼šåœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡æ‰§è¡ŒJVMå‘½ä»¤æ—¶ï¼Œå¾—åˆ°å¯åŠ¨ã€‚</td></tr><tr><td>Signal Dispatcher</td><td>å‰é¢æåˆ°Attach Listenerçº¿ç¨‹çš„èŒè´£æ˜¯æ¥æ”¶å¤–éƒ¨JVMå‘½ä»¤ï¼Œå½“å‘½ä»¤æ¥æ”¶æˆåŠŸåï¼Œä¼šäº¤ç»™signal dispatherçº¿ç¨‹å»è¿›è¡Œåˆ†å‘åˆ°å„ä¸ªä¸åŒçš„æ¨¡å—å¤„ç†å‘½ä»¤ï¼Œå¹¶ä¸”è¿”å›å¤„ç†ç»“æœã€‚signal dispatherçº¿ç¨‹ä¹Ÿæ˜¯åœ¨ç¬¬ä¸€æ¬¡æ¥æ”¶å¤–éƒ¨JVMå‘½ä»¤æ—¶ï¼Œè¿›è¡Œåˆå§‹åŒ–å·¥ä½œã€‚</td></tr><tr><td>CompilerThread0</td><td>ç”¨æ¥è°ƒç”¨JITingï¼Œå®æ—¶ç¼–è¯‘è£…å¸class ã€‚ é€šå¸¸ï¼ŒJVMä¼šå¯åŠ¨å¤šä¸ªçº¿ç¨‹æ¥å¤„ç†è¿™éƒ¨åˆ†å·¥ä½œï¼Œçº¿ç¨‹åç§°åé¢çš„æ•°å­—ä¹Ÿä¼šç´¯åŠ ï¼Œä¾‹å¦‚ï¼šCompilerThread1ã€‚</td></tr><tr><td>Concurrent Mark-Sweep GC Thread</td><td>å¹¶å‘æ ‡è®°æ¸…é™¤åƒåœ¾å›æ”¶å™¨ï¼ˆå°±æ˜¯é€šå¸¸æ‰€è¯´çš„CMS GCï¼‰çº¿ç¨‹ï¼Œ è¯¥çº¿ç¨‹ä¸»è¦é’ˆå¯¹äºè€å¹´ä»£åƒåœ¾å›æ”¶ã€‚psï¼šå¯ç”¨è¯¥åƒåœ¾å›æ”¶å™¨ï¼Œéœ€è¦åœ¨JVMå¯åŠ¨å‚æ•°ä¸­åŠ ä¸Šï¼š-XX:+UseConcMarkSweepGCã€‚</td></tr><tr><td>DestroyJavaVM</td><td>æ‰§è¡Œmain()çš„çº¿ç¨‹ï¼Œåœ¨mainæ‰§è¡Œå®Œåè°ƒç”¨JNIä¸­çš„ jni_DestroyJavaVM() æ–¹æ³•å”¤èµ·DestroyJavaVM çº¿ç¨‹ï¼Œå¤„äºç­‰å¾…çŠ¶æ€ï¼Œç­‰å¾…å…¶å®ƒçº¿ç¨‹ï¼ˆJavaçº¿ç¨‹å’ŒNativeçº¿ç¨‹ï¼‰é€€å‡ºæ—¶é€šçŸ¥å®ƒå¸è½½JVMã€‚æ¯ä¸ªçº¿ç¨‹é€€å‡ºæ—¶ï¼Œéƒ½ä¼šåˆ¤æ–­è‡ªå·±å½“å‰æ˜¯å¦æ˜¯æ•´ä¸ªJVMä¸­æœ€åä¸€ä¸ªédeamonçº¿ç¨‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™é€šçŸ¥DestroyJavaVM çº¿ç¨‹å¸è½½JVMã€‚</td></tr><tr><td>Finalizer Thread</td><td>è¿™ä¸ªçº¿ç¨‹ä¹Ÿæ˜¯åœ¨mainçº¿ç¨‹ä¹‹ååˆ›å»ºçš„ï¼Œå…¶ä¼˜å…ˆçº§ä¸º10ï¼Œä¸»è¦ç”¨äºåœ¨åƒåœ¾æ”¶é›†å‰ï¼Œè°ƒç”¨å¯¹è±¡çš„finalize()æ–¹æ³•ï¼›å…³äºFinalizerçº¿ç¨‹çš„å‡ ç‚¹ï¼š1) åªæœ‰å½“å¼€å§‹ä¸€è½®åƒåœ¾æ”¶é›†æ—¶ï¼Œæ‰ä¼šå¼€å§‹è°ƒç”¨finalize()æ–¹æ³•ï¼›å› æ­¤å¹¶ä¸æ˜¯æ‰€æœ‰å¯¹è±¡çš„finalize()æ–¹æ³•éƒ½ä¼šè¢«æ‰§è¡Œï¼›2) è¯¥çº¿ç¨‹ä¹Ÿæ˜¯daemonçº¿ç¨‹ï¼Œå› æ­¤å¦‚æœè™šæ‹Ÿæœºä¸­æ²¡æœ‰å…¶ä»–édaemonçº¿ç¨‹ï¼Œä¸ç®¡è¯¥çº¿ç¨‹æœ‰æ²¡æœ‰æ‰§è¡Œå®Œfinalize()æ–¹æ³•ï¼ŒJVMä¹Ÿä¼šé€€å‡ºï¼›3) JVMåœ¨åƒåœ¾æ”¶é›†æ—¶ä¼šå°†å¤±å»å¼•ç”¨çš„å¯¹è±¡åŒ…è£…æˆFinalizerå¯¹è±¡ï¼ˆReferenceçš„å®ç°ï¼‰ï¼Œå¹¶æ”¾å…¥ReferenceQueueï¼Œç”±Finalizerçº¿ç¨‹æ¥å¤„ç†ï¼›æœ€åå°†è¯¥Finalizerå¯¹è±¡çš„å¼•ç”¨ç½®ä¸ºnullï¼Œç”±åƒåœ¾æ”¶é›†å™¨æ¥å›æ”¶ï¼›4) JVMä¸ºä»€ä¹ˆè¦å•ç‹¬ç”¨ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œfinalize()æ–¹æ³•å‘¢ï¼Ÿå¦‚æœJVMçš„åƒåœ¾æ”¶é›†çº¿ç¨‹è‡ªå·±æ¥åšï¼Œå¾ˆæœ‰å¯èƒ½ç”±äºåœ¨finalize()æ–¹æ³•ä¸­è¯¯æ“ä½œå¯¼è‡´GCçº¿ç¨‹åœæ­¢æˆ–ä¸å¯æ§ï¼Œè¿™å¯¹GCçº¿ç¨‹æ¥è¯´æ˜¯ä¸€ç§ç¾éš¾ï¼›</td></tr><tr><td>Low Memory Detector</td><td>è¿™ä¸ªçº¿ç¨‹æ˜¯è´Ÿè´£å¯¹å¯ä½¿ç”¨å†…å­˜è¿›è¡Œæ£€æµ‹ï¼Œå¦‚æœå‘ç°å¯ç”¨å†…å­˜ä½ï¼Œåˆ†é…æ–°çš„å†…å­˜ç©ºé—´ã€‚</td></tr><tr><td>Reference Handler</td><td>JVMåœ¨åˆ›å»ºmainçº¿ç¨‹åå°±åˆ›å»ºReference Handlerçº¿ç¨‹ï¼Œå…¶ä¼˜å…ˆçº§æœ€é«˜ï¼Œä¸º10ï¼Œå®ƒä¸»è¦ç”¨äºå¤„ç†å¼•ç”¨å¯¹è±¡æœ¬èº«ï¼ˆè½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨ï¼‰çš„åƒåœ¾å›æ”¶é—®é¢˜ ã€‚</td></tr><tr><td>VM Thread</td><td>è¿™ä¸ªçº¿ç¨‹å°±æ¯”è¾ƒç‰›bäº†ï¼Œæ˜¯JVMé‡Œé¢çš„çº¿ç¨‹æ¯ä½“ï¼Œæ ¹æ®hotspotæºç ï¼ˆvmThread.hppï¼‰é‡Œé¢çš„æ³¨é‡Šï¼Œå®ƒæ˜¯ä¸€ä¸ªå•ä¸ªçš„å¯¹è±¡ï¼ˆæœ€åŸå§‹çš„çº¿ç¨‹ï¼‰ä¼šäº§ç”Ÿæˆ–è§¦å‘æ‰€æœ‰å…¶ä»–çš„çº¿ç¨‹ï¼Œè¿™ä¸ªå•ä¸ªçš„VMçº¿ç¨‹æ˜¯ä¼šè¢«å…¶ä»–çº¿ç¨‹æ‰€ä½¿ç”¨æ¥åšä¸€äº›VMæ“ä½œï¼ˆå¦‚ï¼šæ¸…æ‰«åƒåœ¾ç­‰ï¼‰ã€‚</td></tr></tbody></table><h2 id="å‚è€ƒæ–‡ç« " tabindex="-1"><a class="header-anchor" href="#å‚è€ƒæ–‡ç« "><span><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0">#</a> å‚è€ƒæ–‡ç« </span></a></h2></div><!--[--><div class="sponsor" data-v-7bab3bae><div id="drinks-box" data-v-7bab3bae><div id="drinks-box-s" class="drinks-button left-100" data-v-7bab3bae><div id="drinks-icons" class="left-100 tr3" data-v-7bab3bae><div id="coffee-donate" class="icon-donate" data-v-7bab3bae><span class="font-icon icon iconfont icon-hk-flutter" data-v-7bab3bae></span> èµåŠ© </div></div><div id="drinks-button-box" class="tr3 left-100" data-v-7bab3bae><div id="drinks-button-bg" class="left-100" data-v-7bab3bae></div><div id="github-box" data-v-7bab3bae><a href="https://github.com/lixuanfengs/Cactus" target="_blank" data-v-7bab3bae>Github</a></div><ul id="donate-buttons" class="list tr3" data-v-7bab3bae><li id="paypal_donate" data-v-7bab3bae><a href="https://www.paypal.me/oragekk" target="_blank" data-v-7bab3bae>Paypal</a></li><!-- <li id="btc_donate" class="donate-button">Bitcoin</li> --><li id="alipay_donate" class="donate-button" data-v-7bab3bae>AliPay</li><li id="wechat_donate" class="donate-button2" data-v-7bab3bae>WeChat</li></ul></div><div id="drinks-qrcodes" class="left-100 tr3" data-v-7bab3bae><div id="drinks-qrcode" data-v-7bab3bae></div></div></div></div></div><!--]--><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/lixuanfengs/Cactus/edit/main/src/posts/Java/JVM/è°ƒè¯•æ’é”™ Java çº¿ç¨‹åˆ†æä¹‹çº¿ç¨‹Dumpåˆ†æ.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="vp-meta-info" data-allow-mismatch="text">2024/3/22 10:01:39</span></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 1183895890@qq.com">lixuanfengs</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20Java%20%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90%E4%B9%8B%E5%A0%86%E5%A4%96%E5%86%85%E5%AD%98.html" aria-label="è°ƒè¯•æ’é”™ Java å†…å­˜åˆ†æä¹‹å †å¤–å†…å­˜"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->è°ƒè¯•æ’é”™ Java å†…å­˜åˆ†æä¹‹å †å¤–å†…å­˜</div></a><a class="route-link auto-link next" href="/posts/Java/JVM/%E8%B0%83%E8%AF%95%E6%8E%92%E9%94%99%20Java%20%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E4%B9%8BLinux%E5%91%BD%E4%BB%A4.html" aria-label="è°ƒè¯•æ’é”™ Java é—®é¢˜æ’æŸ¥ä¹‹Linuxå‘½ä»¤"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">è°ƒè¯•æ’é”™ Java é—®é¢˜æ’æŸ¥ä¹‹Linuxå‘½ä»¤<!----></div></a></nav><div id="comment" class="waline-wrapper vp-comment" vp-comment darkmode="false" style="display:block;"><div data-waline provider="Waline"><div class="wl-reaction"><div class="wl-reaction-title">ä½ è®¤ä¸ºè¿™ç¯‡æ–‡ç« æ€ä¹ˆæ ·ï¼Ÿ</div><ul class="wl-reaction-list"><!--[--><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_agree.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_look_down.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_sunglasses.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_pick_nose.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_awkward.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_sleep.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><!--]--></ul></div><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">æ˜µç§°</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">é‚®ç®±(å¯é€‰)</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">ç½‘å€(å¯é€‰)</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="è¯·ç•™è¨€ã€‚(å¡«å†™é‚®ç®±å¯åœ¨è¢«å›å¤æ—¶æ”¶åˆ°é‚®ä»¶æé†’)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>é¢„è§ˆ:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="è¡¨æƒ…" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="è¡¨æƒ…åŒ…"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" aria-hidden="true" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="ä¸Šä¼ å›¾ç‰‡" aria-label="ä¸Šä¼ å›¾ç‰‡"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="é¢„è§ˆ"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <span> Â /Â  <span class="">300</span></span> Â å­—</div><button type="button" class="wl-btn">ç™»å½•</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->æäº¤<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="æœç´¢è¡¨æƒ…åŒ…"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> è¯„è®º</div><ul class="wl-sort"><!--[--><li class="active">æŒ‰æ­£åº</li><li class="">æŒ‰å€’åº</li><li class="">æŒ‰çƒ­åº¦</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v3.3.2</div></div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper" style="display:none;--c835f6e4:;"><div class="busuanzi"><span id="busuanzi_container_site_pv" style="display:none;"> æœ¬ç«™æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"></span>æ¬¡ <span class="post-meta-divider">|</span></span><span id="busuanzi_container_site_uv" style="display:none;"> æ‚¨æ˜¯æœ¬ç«™ç¬¬ <span id="busuanzi_value_site_uv"></span>ä½è®¿é—®è€… </span></div><div class="footer-content"><div class="footer">é»˜è®¤é¡µè„š</div><div class="copyright">Copyright Â© 2018-2024 Cactus li</div></div><span id="runtime_span"></span><!--        <div class="footer-link">--><!--            <a href="https://www.foreverblog.cn/go.html" target="_blank">--><!--                <img--><!--                        :src="wormhole"--><!--                        alt=""--><!--                        style="width: auto; height: 32px"--><!--                        title="ç©¿æ¢­è™«æ´-éšæœºè®¿é—®åå¹´ä¹‹çº¦å‹é“¾åšå®¢"--><!--                /></a>--><!--            <a href="https://www.travellings.cn/go.html" target="_blank">--><!--                <img--><!--                        src="https://www.travellings.cn/assets/logo.gif"--><!--                        alt=""--><!--                        style="width: auto; height: 32px"--><!--                        title="å¼€å¾€-å‹é“¾æ¥åŠ›"--><!--                /></a>--><!--            &lt;!&ndash; <a href="https://www.foreverblog.cn/" target="_blank">--><!--              <img src="https://img.foreverblog.cn/logo_en_default.png" alt="" style="width: auto; height: 16px" />--><!--            </a> &ndash;&gt;--><!--        </div>--></footer></div><!--]--><!--[--><!----><!----><!--[--><!--]--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CF9kF85C.js" defer></script>
  </body>
</html>
